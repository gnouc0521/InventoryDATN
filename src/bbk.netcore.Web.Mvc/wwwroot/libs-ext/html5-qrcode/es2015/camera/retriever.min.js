/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /npm/html5-qrcode@2.3.4/es2015/camera/retriever.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var __awaiter=this&&this.__awaiter||function(e,r,t,a){return new(t||(t=Promise))((function(i,o){function n(e){try{s(a.next(e))}catch(e){o(e)}}function c(e){try{s(a.throw(e))}catch(e){o(e)}}function s(e){var r;e.done?i(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(n,c)}s((a=a.apply(e,r||[])).next())}))};import{Html5QrcodeStrings}from"../strings";export class CameraRetriever{static retrieve(){if(navigator.mediaDevices)return CameraRetriever.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?CameraRetriever.getCamerasFromMediaStreamTrack():CameraRetriever.rejectWithError()}static rejectWithError(){let e=Html5QrcodeStrings.unableToQuerySupportedDevices();return CameraRetriever.isHttpsOrLocalhost()||(e=Html5QrcodeStrings.insecureContextCameraQueryError()),Promise.reject(e)}static isHttpsOrLocalhost(){if("https:"===location.protocol)return!0;const e=location.host.split(":")[0];return"127.0.0.1"===e||"localhost"===e}static getCamerasFromMediaDevices(){return __awaiter(this,void 0,void 0,(function*(){let e=yield navigator.mediaDevices.getUserMedia({audio:!1,video:!0}),r=yield navigator.mediaDevices.enumerateDevices(),t=[];for(const e of r)"videoinput"===e.kind&&t.push({id:e.deviceId,label:e.label});return(e=>{const r=e.getVideoTracks();for(const t of r)t.enabled=!1,t.stop(),e.removeTrack(t)})(e),t}))}static getCamerasFromMediaStreamTrack(){return new Promise(((e,r)=>{MediaStreamTrack.getSources((r=>{const t=[];for(const e of r)"video"===e.kind&&t.push({id:e.id,label:e.label});e(t)}))}))}}
//# sourceMappingURL=/sm/5dd298fd17fffaf0e0af8c608d73c43aa1150f49fd715ad42d5d18f6e8741bd9.map