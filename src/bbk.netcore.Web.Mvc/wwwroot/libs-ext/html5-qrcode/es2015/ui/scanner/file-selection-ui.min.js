/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /npm/html5-qrcode@2.3.4/es2015/ui/scanner/file-selection-ui.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{Html5QrcodeScannerStrings}from"../../strings";import{BaseUiElementFactory,PublicUiElementIdAndClasses}from"./base";export class FileSelectionUi{constructor(e,t,n){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=t?"block":"none",e.appendChild(this.fileBasedScanRegion);let i=document.createElement("label");i.setAttribute("for",this.getFileScanInputId()),i.style.display="inline-block",this.fileBasedScanRegion.appendChild(i),this.fileSelectionButton=BaseUiElementFactory.createElement("button",PublicUiElementIdAndClasses.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",(e=>{i.click()})),i.append(this.fileSelectionButton),this.fileScanInput=BaseUiElementFactory.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",i.appendChild(this.fileScanInput);let a=this;this.fileScanInput.addEventListener("change",(e=>{if(null==e||null==e.target)return;let t=e.target;if(t.files&&0===t.files.length)return;const i=t.files[0];let l=i.name;a.setImageNameToButton(l),n(i)}));let l=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(l),this.fileBasedScanRegion.addEventListener("dragenter",(function(e){a.fileBasedScanRegion.style.border=a.fileBasedScanRegionActiveBorder(),e.stopPropagation(),e.preventDefault()})),this.fileBasedScanRegion.addEventListener("dragleave",(function(e){a.fileBasedScanRegion.style.border=a.fileBasedScanRegionDefaultBorder(),e.stopPropagation(),e.preventDefault()})),this.fileBasedScanRegion.addEventListener("dragover",(function(e){a.fileBasedScanRegion.style.border=a.fileBasedScanRegionActiveBorder(),e.stopPropagation(),e.preventDefault()})),this.fileBasedScanRegion.addEventListener("drop",(function(e){e.stopPropagation(),e.preventDefault(),a.fileBasedScanRegion.style.border=a.fileBasedScanRegionDefaultBorder();var t=e.dataTransfer;if(t){let e=t.files;if(!e||0===e.length)return;let i=!1;for(let t=0;t<e.length;++t){let s=e.item(t);if(!s)continue;let r=/image.*/;if(!s.type.match(r))continue;i=!0;let o=s.name;a.setImageNameToButton(o),n(s),l.innerText=Html5QrcodeScannerStrings.dragAndDropMessage();break}i||(l.innerText=Html5QrcodeScannerStrings.dragAndDropMessageOnlyImages())}}))}hide(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0}show(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1}isShowing(){return"block"===this.fileBasedScanRegion.style.display}resetValue(){this.fileScanInput.value="",this.setInitialValueToButton()}createFileBasedScanRegion(){let e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e}fileBasedScanRegionDefaultBorder(){return"6px dashed #ebebeb"}fileBasedScanRegionActiveBorder(){return"6px dashed rgb(153 151 151)"}createDragAndDropMessage(){let e=document.createElement("div");return e.innerText=Html5QrcodeScannerStrings.dragAndDropMessage(),e.style.fontWeight="400",e}setImageNameToButton(e){if(e.length>20){let t=e.substring(0,8),n=e.length,i=e.substring(n-8,n);e=`${t}....${i}`}let t=Html5QrcodeScannerStrings.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=t}setInitialValueToButton(){let e=Html5QrcodeScannerStrings.fileSelectionChooseImage()+" - "+Html5QrcodeScannerStrings.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e}getFileScanInputId(){return"html5-qrcode-private-filescan-input"}static create(e,t,n){return new FileSelectionUi(e,t,n)}}
//# sourceMappingURL=/sm/f53790f1d332355d4b273755bb25e3bffe9b132a472fed04b8a453820bfc5686.map