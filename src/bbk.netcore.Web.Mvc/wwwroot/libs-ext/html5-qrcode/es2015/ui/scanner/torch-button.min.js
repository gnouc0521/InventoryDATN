/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /npm/html5-qrcode@2.3.4/es2015/ui/scanner/torch-button.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var __awaiter=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function s(t){try{c(n.next(t))}catch(t){i(t)}}function l(t){try{c(n.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,l)}c((n=n.apply(t,e||[])).next())}))};import{Html5QrcodeScannerStrings}from"../../strings";import{BaseUiElementFactory,PublicUiElementIdAndClasses}from"./base";class TorchController{constructor(t,e,r){this.isTorchOn=!1,this.torchCapability=t,this.buttonController=e,this.onTorchActionFailureCallback=r}isTorchEnabled(){return this.isTorchOn}flipState(){return __awaiter(this,void 0,void 0,(function*(){this.buttonController.disable();let t=!this.isTorchOn;try{yield this.torchCapability.apply(t),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),t)}catch(e){this.propagateFailure(t,e),this.buttonController.enable()}}))}updateUiBasedOnLatestSettings(t,e){t===e?(this.buttonController.setText(e?Html5QrcodeScannerStrings.torchOffButton():Html5QrcodeScannerStrings.torchOnButton()),this.isTorchOn=e):this.propagateFailure(e),this.buttonController.enable()}propagateFailure(t,e){let r=t?Html5QrcodeScannerStrings.torchOnFailedMessage():Html5QrcodeScannerStrings.torchOffFailedMessage();e&&(r+="; Error = "+e),this.onTorchActionFailureCallback(r)}reset(){this.isTorchOn=!1}}export class TorchButton{constructor(t,e){this.onTorchActionFailureCallback=e,this.torchButton=BaseUiElementFactory.createElement("button",PublicUiElementIdAndClasses.TORCH_BUTTON_ID),this.torchController=new TorchController(t,this,e)}render(t,e){this.torchButton.innerText=Html5QrcodeScannerStrings.torchOnButton(),this.torchButton.style.display=e.display,this.torchButton.style.marginLeft=e.marginLeft;let r=this;this.torchButton.addEventListener("click",(t=>__awaiter(this,void 0,void 0,(function*(){yield r.torchController.flipState(),r.torchController.isTorchEnabled()?(r.torchButton.classList.remove(PublicUiElementIdAndClasses.TORCH_BUTTON_CLASS_TORCH_OFF),r.torchButton.classList.add(PublicUiElementIdAndClasses.TORCH_BUTTON_CLASS_TORCH_ON)):(r.torchButton.classList.remove(PublicUiElementIdAndClasses.TORCH_BUTTON_CLASS_TORCH_ON),r.torchButton.classList.add(PublicUiElementIdAndClasses.TORCH_BUTTON_CLASS_TORCH_OFF))})))),t.appendChild(this.torchButton)}updateTorchCapability(t){this.torchController=new TorchController(t,this,this.onTorchActionFailureCallback)}getTorchButton(){return this.torchButton}hide(){this.torchButton.style.display="none"}show(){this.torchButton.style.display="inline-block"}disable(){this.torchButton.disabled=!0}enable(){this.torchButton.disabled=!1}setText(t){this.torchButton.innerText=t}reset(){this.torchButton.innerText=Html5QrcodeScannerStrings.torchOnButton(),this.torchController.reset()}static create(t,e,r,n){let o=new TorchButton(e,n);return o.render(t,r),o}}
//# sourceMappingURL=/sm/a16253963965b36a7921fbc164c36f05c1e35b8fbe6257ed115cdea824e44857.map