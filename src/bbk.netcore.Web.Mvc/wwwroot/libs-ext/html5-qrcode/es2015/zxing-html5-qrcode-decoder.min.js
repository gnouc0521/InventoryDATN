/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /npm/html5-qrcode@2.3.4/es2015/zxing-html5-qrcode-decoder.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import*as ZXing from"../third_party/zxing-js.umd";import{QrcodeResultFormat,Html5QrcodeSupportedFormats}from"./core";export class ZXingHtml5QrcodeDecoder{constructor(r,t,e){if(this.formatMap=new Map([[Html5QrcodeSupportedFormats.QR_CODE,ZXing.BarcodeFormat.QR_CODE],[Html5QrcodeSupportedFormats.AZTEC,ZXing.BarcodeFormat.AZTEC],[Html5QrcodeSupportedFormats.CODABAR,ZXing.BarcodeFormat.CODABAR],[Html5QrcodeSupportedFormats.CODE_39,ZXing.BarcodeFormat.CODE_39],[Html5QrcodeSupportedFormats.CODE_93,ZXing.BarcodeFormat.CODE_93],[Html5QrcodeSupportedFormats.CODE_128,ZXing.BarcodeFormat.CODE_128],[Html5QrcodeSupportedFormats.DATA_MATRIX,ZXing.BarcodeFormat.DATA_MATRIX],[Html5QrcodeSupportedFormats.MAXICODE,ZXing.BarcodeFormat.MAXICODE],[Html5QrcodeSupportedFormats.ITF,ZXing.BarcodeFormat.ITF],[Html5QrcodeSupportedFormats.EAN_13,ZXing.BarcodeFormat.EAN_13],[Html5QrcodeSupportedFormats.EAN_8,ZXing.BarcodeFormat.EAN_8],[Html5QrcodeSupportedFormats.PDF_417,ZXing.BarcodeFormat.PDF_417],[Html5QrcodeSupportedFormats.RSS_14,ZXing.BarcodeFormat.RSS_14],[Html5QrcodeSupportedFormats.RSS_EXPANDED,ZXing.BarcodeFormat.RSS_EXPANDED],[Html5QrcodeSupportedFormats.UPC_A,ZXing.BarcodeFormat.UPC_A],[Html5QrcodeSupportedFormats.UPC_E,ZXing.BarcodeFormat.UPC_E],[Html5QrcodeSupportedFormats.UPC_EAN_EXTENSION,ZXing.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!ZXing)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=e;const o=this.createZXingFormats(r),a=new Map;a.set(ZXing.DecodeHintType.POSSIBLE_FORMATS,o),a.set(ZXing.DecodeHintType.TRY_HARDER,!1),this.hints=a}decodeAsync(r){return new Promise(((t,e)=>{try{t(this.decode(r))}catch(r){e(r)}}))}decode(r){const t=new ZXing.MultiFormatReader(this.verbose,this.hints),e=new ZXing.HTMLCanvasElementLuminanceSource(r),o=new ZXing.BinaryBitmap(new ZXing.HybridBinarizer(e));let a=t.decode(o);return{text:a.text,format:QrcodeResultFormat.create(this.toHtml5QrcodeSupportedFormats(a.format)),debugData:this.createDebugData()}}createReverseFormatMap(){let r=new Map;return this.formatMap.forEach(((t,e,o)=>{r.set(t,e)})),r}toHtml5QrcodeSupportedFormats(r){if(!this.reverseFormatMap.has(r))throw`reverseFormatMap doesn't have ${r}`;return this.reverseFormatMap.get(r)}createZXingFormats(r){let t=[];for(const e of r)this.formatMap.has(e)?t.push(this.formatMap.get(e)):this.logger.logError(`${e} is not supported byZXingHtml5QrcodeShim`);return t}createDebugData(){return{decoderName:"zxing-js"}}}
//# sourceMappingURL=/sm/9afadf2227c0721f0d35457380e27a93082f1d82647c9e637fcf1e8a6fbfb7ea.map