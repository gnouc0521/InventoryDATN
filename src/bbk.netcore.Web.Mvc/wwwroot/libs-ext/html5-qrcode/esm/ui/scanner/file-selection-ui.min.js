/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /npm/html5-qrcode@2.3.4/esm/ui/scanner/file-selection-ui.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{Html5QrcodeScannerStrings}from"../../strings";import{BaseUiElementFactory,PublicUiElementIdAndClasses}from"./base";var FileSelectionUi=function(){function e(e,t,n){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=t?"block":"none",e.appendChild(this.fileBasedScanRegion);var i=document.createElement("label");i.setAttribute("for",this.getFileScanInputId()),i.style.display="inline-block",this.fileBasedScanRegion.appendChild(i),this.fileSelectionButton=BaseUiElementFactory.createElement("button",PublicUiElementIdAndClasses.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",(function(e){i.click()})),i.append(this.fileSelectionButton),this.fileScanInput=BaseUiElementFactory.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",i.appendChild(this.fileScanInput);var a=this;this.fileScanInput.addEventListener("change",(function(e){if(null!=e&&null!=e.target){var t=e.target;if(!t.files||0!==t.files.length){var i=t.files[0],o=i.name;a.setImageNameToButton(o),n(i)}}}));var o=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(o),this.fileBasedScanRegion.addEventListener("dragenter",(function(e){a.fileBasedScanRegion.style.border=a.fileBasedScanRegionActiveBorder(),e.stopPropagation(),e.preventDefault()})),this.fileBasedScanRegion.addEventListener("dragleave",(function(e){a.fileBasedScanRegion.style.border=a.fileBasedScanRegionDefaultBorder(),e.stopPropagation(),e.preventDefault()})),this.fileBasedScanRegion.addEventListener("dragover",(function(e){a.fileBasedScanRegion.style.border=a.fileBasedScanRegionActiveBorder(),e.stopPropagation(),e.preventDefault()})),this.fileBasedScanRegion.addEventListener("drop",(function(e){e.stopPropagation(),e.preventDefault(),a.fileBasedScanRegion.style.border=a.fileBasedScanRegionDefaultBorder();var t=e.dataTransfer;if(t){var i=t.files;if(!i||0===i.length)return;for(var r=!1,l=0;l<i.length;++l){var s=i.item(l);if(s){if(s.type.match(/image.*/)){r=!0;var c=s.name;a.setImageNameToButton(c),n(s),o.innerText=Html5QrcodeScannerStrings.dragAndDropMessage();break}}}r||(o.innerText=Html5QrcodeScannerStrings.dragAndDropMessageOnlyImages())}}))}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return"block"===this.fileBasedScanRegion.style.display},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=Html5QrcodeScannerStrings.dragAndDropMessage(),e.style.fontWeight="400",e},e.prototype.setImageNameToButton=function(e){if(e.length>20){var t=e.substring(0,8),n=e.length,i=e.substring(n-8,n);e=t+"...."+i}var a=Html5QrcodeScannerStrings.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=a},e.prototype.setInitialValueToButton=function(){var e=Html5QrcodeScannerStrings.fileSelectionChooseImage()+" - "+Html5QrcodeScannerStrings.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(t,n,i){return new e(t,n,i)},e}();export{FileSelectionUi};
//# sourceMappingURL=/sm/588fabbd9421ec72150fa594b41d783894b34e9d654049a7c110d81709c32625.map