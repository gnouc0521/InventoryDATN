/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /npm/html5-qrcode@2.3.4/esm/ui/scanner/torch-button.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var __awaiter=this&&this.__awaiter||function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function s(t){try{a(r.next(t))}catch(t){i(t)}}function c(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(s,c)}a((r=r.apply(t,n||[])).next())}))},__generator=this&&this.__generator||function(t,n){var e,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;s;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=n.call(t,s)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};import{Html5QrcodeScannerStrings}from"../../strings";import{BaseUiElementFactory,PublicUiElementIdAndClasses}from"./base";var TorchController=function(){function t(t,n,e){this.isTorchOn=!1,this.torchCapability=t,this.buttonController=n,this.onTorchActionFailureCallback=e}return t.prototype.isTorchEnabled=function(){return this.isTorchOn},t.prototype.flipState=function(){return __awaiter(this,void 0,void 0,(function(){var t,n;return __generator(this,(function(e){switch(e.label){case 0:this.buttonController.disable(),t=!this.isTorchOn,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.torchCapability.apply(t)];case 2:return e.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),t),[3,4];case 3:return n=e.sent(),this.propagateFailure(t,n),this.buttonController.enable(),[3,4];case 4:return[2]}}))}))},t.prototype.updateUiBasedOnLatestSettings=function(t,n){t===n?(this.buttonController.setText(n?Html5QrcodeScannerStrings.torchOffButton():Html5QrcodeScannerStrings.torchOnButton()),this.isTorchOn=n):this.propagateFailure(n),this.buttonController.enable()},t.prototype.propagateFailure=function(t,n){var e=t?Html5QrcodeScannerStrings.torchOnFailedMessage():Html5QrcodeScannerStrings.torchOffFailedMessage();n&&(e+="; Error = "+n),this.onTorchActionFailureCallback(e)},t.prototype.reset=function(){this.isTorchOn=!1},t}(),TorchButton=function(){function t(t,n){this.onTorchActionFailureCallback=n,this.torchButton=BaseUiElementFactory.createElement("button",PublicUiElementIdAndClasses.TORCH_BUTTON_ID),this.torchController=new TorchController(t,this,n)}return t.prototype.render=function(t,n){var e=this;this.torchButton.innerText=Html5QrcodeScannerStrings.torchOnButton(),this.torchButton.style.display=n.display,this.torchButton.style.marginLeft=n.marginLeft;var r=this;this.torchButton.addEventListener("click",(function(t){return __awaiter(e,void 0,void 0,(function(){return __generator(this,(function(t){switch(t.label){case 0:return[4,r.torchController.flipState()];case 1:return t.sent(),r.torchController.isTorchEnabled()?(r.torchButton.classList.remove(PublicUiElementIdAndClasses.TORCH_BUTTON_CLASS_TORCH_OFF),r.torchButton.classList.add(PublicUiElementIdAndClasses.TORCH_BUTTON_CLASS_TORCH_ON)):(r.torchButton.classList.remove(PublicUiElementIdAndClasses.TORCH_BUTTON_CLASS_TORCH_ON),r.torchButton.classList.add(PublicUiElementIdAndClasses.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}}))}))})),t.appendChild(this.torchButton)},t.prototype.updateTorchCapability=function(t){this.torchController=new TorchController(t,this,this.onTorchActionFailureCallback)},t.prototype.getTorchButton=function(){return this.torchButton},t.prototype.hide=function(){this.torchButton.style.display="none"},t.prototype.show=function(){this.torchButton.style.display="inline-block"},t.prototype.disable=function(){this.torchButton.disabled=!0},t.prototype.enable=function(){this.torchButton.disabled=!1},t.prototype.setText=function(t){this.torchButton.innerText=t},t.prototype.reset=function(){this.torchButton.innerText=Html5QrcodeScannerStrings.torchOnButton(),this.torchController.reset()},t.create=function(n,e,r,o){var i=new t(e,o);return i.render(n,r),i},t}();export{TorchButton};
//# sourceMappingURL=/sm/6419e384a1fd135b3d33d75fe86da0256615101e26429cc139902810e6947411.map