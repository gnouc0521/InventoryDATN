/**
 * Minified by jsDelivr using Terser v5.7.1.
 * Original file: /npm/jsbarcode@3.11.5/automation/releasing.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var gulp=require("gulp"),bump=require("gulp-bump"),git=require("gulp-git"),publishRelease=require("publish-release"),gzipSize=require("gzip-size"),runSequence=require("gulp4-run-sequence"),fs=require("fs"),settings=require("./settings.json"),shared=require("./shared.js");function releaseDone(e){e?console.log(e.message):console.log("Successful!")}function updateReadmeFileSizes(){var e=require("./barcode-building.json"),s=fs.readFileSync("README.md","utf-8"),r=fs.readFileSync("dist/JsBarcode.all.min.js"),i=gzipSize.sync(r),n=new RegExp("\\|[^\\|]*\\|([ \\t\\*]*\\[JsBarcode\\.all\\.min\\.js\\])");for(var a in s=s.replace(n,"|  *"+formatSize(i)+"*  |$1"),e){var u=shared.minifiedFilename(e[a].name),p=fs.readFileSync("dist/barcodes/"+u),t=gzipSize.sync(p),o=new RegExp("\\|[^\\|]*\\|([ \\t]*\\["+RegExp.escape(u)+"\\])");s=s.replace(o,"|  "+formatSize(t)+"  |$1")}fs.writeFileSync("README.md",s,"utf8")}function formatSize(e){return Math.round(e/1024*10)/10+" kB"}gulp.task("git-release",gulp.series(["compress"],(function(e){var s="v"+require(settings.baseDir+"package.json").version,r=":package: Release "+s;updateReadmeFileSizes(),gulp.src(["./package.json","./bower.json","./README.md","./bin/","./dist"]).pipe(git.add({args:"--all --force"})).pipe(git.commit(r)),git.push("origin","master",(function(){git.tag(s,r,(function(){git.push("origin","master",{args:"--tags"},e)}))}))}))),gulp.task("bump-patch",(function(){return gulp.src(["./package.json","./bower.json"]).pipe(bump({type:"patch"})).pipe(gulp.dest("./"))})),gulp.task("bump-minor",(function(){return gulp.src(["./package.json","./bower.json"]).pipe(bump({type:"minor"})).pipe(gulp.dest("./"))})),gulp.task("bump-major",(function(){return gulp.src(["./package.json","./bower.json"]).pipe(bump({type:"major"})).pipe(gulp.dest("./"))})),gulp.task("npm",(function(e){require("child_process").spawn("npm",["publish"],{stdio:"inherit"}).on("close",e)})),gulp.task("github-release",(function(e){var s="v"+require(settings.baseDir+"./package.json").version,r="JsBarcode "+s;publishRelease({token:process.env.GITHUB_TOKEN,owner:"lindell",repo:"JsBarcode",tag:s,name:r,assets:[__dirname+"/"+settings.baseDir+"/dist/JsBarcode.all.min.js",__dirname+"/"+settings.baseDir+"/dist/JsBarcode.all.js"]},e)})),gulp.task("release",gulp.series((function(e){runSequence("git-release","github-release","npm",e)}))),gulp.task("patch",(function(){runSequence("bump-patch","release",releaseDone)})),gulp.task("minor",(function(){runSequence("bump-minor","release",releaseDone)})),gulp.task("major",(function(){runSequence("bump-major","release",releaseDone)})),RegExp.escape=function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")};
//# sourceMappingURL=/sm/ec0e2ffab7cd125db1a4e766ac712a110c710c6fda41b61a2310cd23709a1601.map