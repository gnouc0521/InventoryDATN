/**
 * Minified by jsDelivr using Terser v5.7.1.
 * Original file: /npm/jsbarcode@3.11.5/src/renderers/svg.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import merge from"../help/merge.js";import{calculateEncodingAttributes,getTotalWidthOfEncodings,getMaximumHeightOfEncodings}from"./shared.js";var svgns="http://www.w3.org/2000/svg";class SVGRenderer{constructor(t,e,i){this.svg=t,this.encodings=e,this.options=i,this.document=i.xmlDocument||document}render(){var t=this.options.marginLeft;this.prepareSVG();for(let r=0;r<this.encodings.length;r++){var e=this.encodings[r],i=merge(this.options,e.options),s=this.createGroup(t,i.marginTop,this.svg);this.setGroupOptions(s,i),this.drawSvgBarcode(s,i,e),this.drawSVGText(s,i,e),t+=e.width}}prepareSVG(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);calculateEncodingAttributes(this.encodings,this.options);var t=getTotalWidthOfEncodings(this.encodings),e=getMaximumHeightOfEncodings(this.encodings),i=t+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(i,e),this.options.background&&this.drawRect(0,0,i,e,this.svg).setAttribute("style","fill:"+this.options.background+";")}drawSvgBarcode(t,e,i){var s,r=i.data;s="top"==e.textPosition?e.fontSize+e.textMargin:0;for(var n=0,o=0,h=0;h<r.length;h++)o=h*e.width+i.barcodePadding,"1"===r[h]?n++:n>0&&(this.drawRect(o-e.width*n,s,e.width*n,e.height,t),n=0);n>0&&this.drawRect(o-e.width*(n-1),s,e.width*n,e.height,t)}drawSVGText(t,e,i){var s,r,n=this.document.createElementNS(svgns,"text");e.displayValue&&(n.setAttribute("style","font:"+e.fontOptions+" "+e.fontSize+"px "+e.font),r="top"==e.textPosition?e.fontSize-e.textMargin:e.height+e.textMargin+e.fontSize,"left"==e.textAlign||i.barcodePadding>0?(s=0,n.setAttribute("text-anchor","start")):"right"==e.textAlign?(s=i.width-1,n.setAttribute("text-anchor","end")):(s=i.width/2,n.setAttribute("text-anchor","middle")),n.setAttribute("x",s),n.setAttribute("y",r),n.appendChild(this.document.createTextNode(i.text)),t.appendChild(n))}setSvgAttributes(t,e){var i=this.svg;i.setAttribute("width",t+"px"),i.setAttribute("height",e+"px"),i.setAttribute("x","0px"),i.setAttribute("y","0px"),i.setAttribute("viewBox","0 0 "+t+" "+e),i.setAttribute("xmlns",svgns),i.setAttribute("version","1.1"),i.setAttribute("style","transform: translate(0,0)")}createGroup(t,e,i){var s=this.document.createElementNS(svgns,"g");return s.setAttribute("transform","translate("+t+", "+e+")"),i.appendChild(s),s}setGroupOptions(t,e){t.setAttribute("style","fill:"+e.lineColor+";")}drawRect(t,e,i,s,r){var n=this.document.createElementNS(svgns,"rect");return n.setAttribute("x",t),n.setAttribute("y",e),n.setAttribute("width",i),n.setAttribute("height",s),r.appendChild(n),n}}export default SVGRenderer;
//# sourceMappingURL=/sm/4a8dab9bc35e3bf3a4683fc96c043a24cbd5be6dbfca7077f6636a579f55467d.map