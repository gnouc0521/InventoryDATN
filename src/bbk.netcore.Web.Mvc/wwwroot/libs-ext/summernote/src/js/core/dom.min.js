/**
 * Minified by jsDelivr using Terser v5.9.0.
 * Original file: /npm/summernote@0.8.20/src/js/core/dom.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import $ from"jquery";import func from"./func";import lists from"./lists";import env from"./env";const NBSP_CHAR=String.fromCharCode(160),ZERO_WIDTH_NBSP_CHAR="\ufeff";function isEditable(e){return e&&$(e).hasClass("note-editable")}function isControlSizing(e){return e&&$(e).hasClass("note-control-sizing")}function makePredByNodeName(e){return e=e.toUpperCase(),function(n){return n&&n.nodeName.toUpperCase()===e}}function isText(e){return e&&3===e.nodeType}function isElement(e){return e&&1===e.nodeType}function isVoid(e){return e&&/^BR|^IMG|^HR|^IFRAME|^BUTTON|^INPUT|^AUDIO|^VIDEO|^EMBED/.test(e.nodeName.toUpperCase())}function isPara(e){return!isEditable(e)&&(e&&/^DIV|^P|^LI|^H[1-7]/.test(e.nodeName.toUpperCase()))}function isHeading(e){return e&&/^H[1-7]/.test(e.nodeName.toUpperCase())}const isPre=makePredByNodeName("PRE"),isLi=makePredByNodeName("LI");function isPurePara(e){return isPara(e)&&!isLi(e)}const isTable=makePredByNodeName("TABLE"),isData=makePredByNodeName("DATA");function isInline(e){return!(isBodyContainer(e)||isList(e)||isHr(e)||isPara(e)||isTable(e)||isBlockquote(e)||isData(e))}function isList(e){return e&&/^UL|^OL/.test(e.nodeName.toUpperCase())}const isHr=makePredByNodeName("HR");function isCell(e){return e&&/^TD|^TH/.test(e.nodeName.toUpperCase())}const isBlockquote=makePredByNodeName("BLOCKQUOTE");function isBodyContainer(e){return isCell(e)||isBlockquote(e)||isEditable(e)}const isAnchor=makePredByNodeName("A");function isParaInline(e){return isInline(e)&&!!ancestor(e,isPara)}function isBodyInline(e){return isInline(e)&&!ancestor(e,isPara)}const isBody=makePredByNodeName("BODY");function isClosestSibling(e,n){return e.nextSibling===n||e.previousSibling===n}function withClosestSiblings(e,n){n=n||func.ok;const t=[];return e.previousSibling&&n(e.previousSibling)&&t.push(e.previousSibling),t.push(e),e.nextSibling&&n(e.nextSibling)&&t.push(e.nextSibling),t}const blankHTML=env.isMSIE&&env.browserVersion<11?"&nbsp;":"<br>";function nodeLength(e){return isText(e)?e.nodeValue.length:e?e.childNodes.length:0}function deepestChildIsEmpty(e){do{if(null===e.firstElementChild||""===e.firstElementChild.innerHTML)break}while(e=e.firstElementChild);return isEmpty(e)}function isEmpty(e){const n=nodeLength(e);return 0===n||(!isText(e)&&1===n&&e.innerHTML===blankHTML||!(!lists.all(e.childNodes,isText)||""!==e.innerHTML))}function paddingBlankHTML(e){isVoid(e)||nodeLength(e)||(e.innerHTML=blankHTML)}function ancestor(e,n){for(;e;){if(n(e))return e;if(isEditable(e))break;e=e.parentNode}return null}function singleChildAncestor(e,n){for(e=e.parentNode;e&&1===nodeLength(e);){if(n(e))return e;if(isEditable(e))break;e=e.parentNode}return null}function listAncestor(e,n){n=n||func.fail;const t=[];return ancestor(e,(function(e){return isEditable(e)||t.push(e),n(e)})),t}function lastAncestor(e,n){const t=listAncestor(e);return lists.last(t.filter(n))}function commonAncestor(e,n){const t=listAncestor(e);for(let e=n;e;e=e.parentNode)if(t.indexOf(e)>-1)return e;return null}function listPrev(e,n){n=n||func.fail;const t=[];for(;e&&!n(e);)t.push(e),e=e.previousSibling;return t}function listNext(e,n){n=n||func.fail;const t=[];for(;e&&!n(e);)t.push(e),e=e.nextSibling;return t}function listDescendant(e,n){const t=[];return n=n||func.ok,function i(o){e!==o&&n(o)&&t.push(o);for(let e=0,n=o.childNodes.length;e<n;e++)i(o.childNodes[e])}(e),t}function wrap(e,n){const t=e.parentNode,i=$("<"+n+">")[0];return t.insertBefore(i,e),i.appendChild(e),i}function insertAfter(e,n){const t=n.nextSibling;let i=n.parentNode;return t?i.insertBefore(e,t):i.appendChild(e),e}function appendChildNodes(e,n){return $.each(n,(function(n,t){e.appendChild(t)})),e}function isLeftEdgePoint(e){return 0===e.offset}function isRightEdgePoint(e){return e.offset===nodeLength(e.node)}function isEdgePoint(e){return isLeftEdgePoint(e)||isRightEdgePoint(e)}function isLeftEdgeOf(e,n){for(;e&&e!==n;){if(0!==position(e))return!1;e=e.parentNode}return!0}function isRightEdgeOf(e,n){if(!n)return!1;for(;e&&e!==n;){if(position(e)!==nodeLength(e.parentNode)-1)return!1;e=e.parentNode}return!0}function isLeftEdgePointOf(e,n){return isLeftEdgePoint(e)&&isLeftEdgeOf(e.node,n)}function isRightEdgePointOf(e,n){return isRightEdgePoint(e)&&isRightEdgeOf(e.node,n)}function position(e){let n=0;for(;e=e.previousSibling;)n+=1;return n}function hasChildren(e){return!!(e&&e.childNodes&&e.childNodes.length)}function prevPoint(e,n){let t,i;if(0===e.offset){if(isEditable(e.node))return null;t=e.node.parentNode,i=position(e.node)}else hasChildren(e.node)?(t=e.node.childNodes[e.offset-1],i=nodeLength(t)):(t=e.node,i=n?0:e.offset-1);return{node:t,offset:i}}function nextPoint(e,n){let t,i;if(nodeLength(e.node)===e.offset){if(isEditable(e.node))return null;let n=getNextTextNode(e.node);n?(t=n,i=0):(t=e.node.parentNode,i=position(e.node)+1)}else hasChildren(e.node)?(t=e.node.childNodes[e.offset],i=0):(t=e.node,i=n?nodeLength(e.node):e.offset+1);return{node:t,offset:i}}function nextPointWithEmptyNode(e,n){let t,i=0;if(isEmpty(e.node))return null===e.node?null:(t=e.node.nextSibling,i=0,{node:t,offset:i});if(nodeLength(e.node)===e.offset){if(isEditable(e.node))return null;t=e.node.parentNode,i=position(e.node)+1,isEditable(t)&&(t=e.node.nextSibling,i=0)}else if(hasChildren(e.node)){if(t=e.node.childNodes[e.offset],i=0,isEmpty(t))return isEmpty(e.node.nextSibling)?null:{node:e.node.nextSibling,offset:i}}else if(t=e.node,i=n?nodeLength(e.node):e.offset+1,isEmpty(t))return null;return{node:t,offset:i}}function getNextTextNode(e){if(e.nextSibling&&e.parent===e.nextSibling.parent)return isText(e.nextSibling)?e.nextSibling:getNextTextNode(e.nextSibling)}function isSamePoint(e,n){return e.node===n.node&&e.offset===n.offset}function isVisiblePoint(e){if(isText(e.node)||!hasChildren(e.node)||isEmpty(e.node))return!0;const n=e.node.childNodes[e.offset-1],t=e.node.childNodes[e.offset];return!((n&&!isVoid(n)||t&&!isVoid(t))&&!isTable(t))}function prevPointUntil(e,n){for(;e;){if(n(e))return e;e=prevPoint(e)}return null}function nextPointUntil(e,n){for(;e;){if(n(e))return e;e=nextPoint(e)}return null}function isCharPoint(e){if(!isText(e.node))return!1;const n=e.node.nodeValue.charAt(e.offset-1);return n&&" "!==n&&n!==NBSP_CHAR}function isSpacePoint(e){if(!isText(e.node))return!1;const n=e.node.nodeValue.charAt(e.offset-1);return" "===n||n===NBSP_CHAR}function walkPoint(e,n,t,i){let o=e;for(;o&&(t(o),!isSamePoint(o,n));){o=nextPointWithEmptyNode(o,i&&e.node!==o.node&&n.node!==o.node)}}function makeOffsetPath(e,n){return listAncestor(n,func.eq(e)).map(position).reverse()}function fromOffsetPath(e,n){let t=e;for(let e=0,i=n.length;e<i;e++)t=t.childNodes.length<=n[e]?t.childNodes[t.childNodes.length-1]:t.childNodes[n[e]];return t}function splitNode(e,n){let t=n&&n.isSkipPaddingBlankHTML;const i=n&&n.isNotSplitEdgePoint,o=n&&n.isDiscardEmptySplits;if(o&&(t=!0),isEdgePoint(e)&&(isText(e.node)||i)){if(isLeftEdgePoint(e))return e.node;if(isRightEdgePoint(e))return e.node.nextSibling}if(isText(e.node))return e.node.splitText(e.offset);{const n=e.node.childNodes[e.offset],i=insertAfter(e.node.cloneNode(!1),e.node);return appendChildNodes(i,listNext(n)),t||(paddingBlankHTML(e.node),paddingBlankHTML(i)),o&&(isEmpty(e.node)&&remove(e.node),isEmpty(i))?(remove(i),e.node.nextSibling):i}}function splitTree(e,n,t){const i=listAncestor(n.node,func.eq(e));return i.length?1===i.length?splitNode(n,t):i.reduce((function(e,i){return e===n.node&&(e=splitNode(n,t)),splitNode({node:i,offset:e?position(e):nodeLength(i)},t)})):null}function splitPoint(e,n){const t=n?isPara:isBodyContainer,i=listAncestor(e.node,t),o=lists.last(i)||e.node;let s,r;t(o)?(s=i[i.length-2],r=o):(s=o,r=s.parentNode);let d=s&&splitTree(s,e,{isSkipPaddingBlankHTML:n,isNotSplitEdgePoint:n});return d||r!==e.node||(d=e.node.childNodes[e.offset]),{rightNode:d,container:r}}function create(e){return document.createElement(e)}function createText(e){return document.createTextNode(e)}function remove(e,n){if(!e||!e.parentNode)return;if(e.removeNode)return e.removeNode(n);const t=e.parentNode;if(!n){const n=[];for(let t=0,i=e.childNodes.length;t<i;t++)n.push(e.childNodes[t]);for(let i=0,o=n.length;i<o;i++)t.insertBefore(n[i],e)}t.removeChild(e)}function removeWhile(e,n){for(;e&&!isEditable(e)&&n(e);){const n=e.parentNode;remove(e),e=n}}function replace(e,n){if(e.nodeName.toUpperCase()===n.toUpperCase())return e;const t=create(n);return e.style.cssText&&(t.style.cssText=e.style.cssText),appendChildNodes(t,lists.from(e.childNodes)),insertAfter(t,e),remove(e),t}const isTextarea=makePredByNodeName("TEXTAREA");function value(e,n){const t=isTextarea(e[0])?e.val():e.html();return n?t.replace(/[\n\r]/g,""):t}function html(e,n){let t=value(e);if(n){const e=/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g;t=t.replace(e,(function(e,n,t){t=t.toUpperCase();const i=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(t)&&!!n,o=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(t);return e+(i||o?"\n":"")})),t=t.trim()}return t}function posFromPlaceholder(e){const n=$(e),t=n.offset(),i=n.outerHeight(!0);return{left:t.left,top:t.top+i}}function attachEvents(e,n){Object.keys(n).forEach((function(t){e.on(t,n[t])}))}function detachEvents(e,n){Object.keys(n).forEach((function(t){e.off(t,n[t])}))}function isCustomStyleTag(e){return e&&!isText(e)&&lists.contains(e.classList,"note-styletag")}export default{NBSP_CHAR:NBSP_CHAR,ZERO_WIDTH_NBSP_CHAR:"\ufeff",blank:blankHTML,emptyPara:`<p>${blankHTML}</p>`,makePredByNodeName:makePredByNodeName,isEditable:isEditable,isControlSizing:isControlSizing,isText:isText,isElement:isElement,isVoid:isVoid,isPara:isPara,isPurePara:isPurePara,isHeading:isHeading,isInline:isInline,isBlock:func.not(isInline),isBodyInline:isBodyInline,isBody:isBody,isParaInline:isParaInline,isPre:isPre,isList:isList,isTable:isTable,isData:isData,isCell:isCell,isBlockquote:isBlockquote,isBodyContainer:isBodyContainer,isAnchor:isAnchor,isDiv:makePredByNodeName("DIV"),isLi:isLi,isBR:makePredByNodeName("BR"),isSpan:makePredByNodeName("SPAN"),isB:makePredByNodeName("B"),isU:makePredByNodeName("U"),isS:makePredByNodeName("S"),isI:makePredByNodeName("I"),isImg:makePredByNodeName("IMG"),isTextarea:isTextarea,deepestChildIsEmpty:deepestChildIsEmpty,isEmpty:isEmpty,isEmptyAnchor:func.and(isAnchor,isEmpty),isClosestSibling:isClosestSibling,withClosestSiblings:withClosestSiblings,nodeLength:nodeLength,isLeftEdgePoint:isLeftEdgePoint,isRightEdgePoint:isRightEdgePoint,isEdgePoint:isEdgePoint,isLeftEdgeOf:isLeftEdgeOf,isRightEdgeOf:isRightEdgeOf,isLeftEdgePointOf:isLeftEdgePointOf,isRightEdgePointOf:isRightEdgePointOf,prevPoint:prevPoint,nextPoint:nextPoint,nextPointWithEmptyNode:nextPointWithEmptyNode,isSamePoint:isSamePoint,isVisiblePoint:isVisiblePoint,prevPointUntil:prevPointUntil,nextPointUntil:nextPointUntil,isCharPoint:isCharPoint,isSpacePoint:isSpacePoint,walkPoint:walkPoint,ancestor:ancestor,singleChildAncestor:singleChildAncestor,listAncestor:listAncestor,lastAncestor:lastAncestor,listNext:listNext,listPrev:listPrev,listDescendant:listDescendant,commonAncestor:commonAncestor,wrap:wrap,insertAfter:insertAfter,appendChildNodes:appendChildNodes,position:position,hasChildren:hasChildren,makeOffsetPath:makeOffsetPath,fromOffsetPath:fromOffsetPath,splitTree:splitTree,splitPoint:splitPoint,create:create,createText:createText,remove:remove,removeWhile:removeWhile,replace:replace,html:html,value:value,posFromPlaceholder:posFromPlaceholder,attachEvents:attachEvents,detachEvents:detachEvents,isCustomStyleTag:isCustomStyleTag};
//# sourceMappingURL=/sm/d63885551f086ea47c50fec01a622e53f3d71eb38aa1530613bee5006009094b.map