/**
 * Minified by jsDelivr using Terser v5.9.0.
 * Original file: /npm/summernote@0.8.20/src/js/editing/Bullet.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import $ from"jquery";import lists from"../core/lists";import func from"../core/func";import dom from"../core/dom";import range from"../core/range";export default class Bullet{insertOrderedList(e){this.toggleList("OL",e)}insertUnorderedList(e){this.toggleList("UL",e)}indent(e){const i=range.create(e).wrapBodyInlineWithPara(),t=i.nodes(dom.isPara,{includeAncestor:!0}),s=lists.clusterBy(t,func.peq2("parentNode"));$.each(s,((e,i)=>{const t=lists.head(i);if(dom.isLi(t)){const e=this.findList(t.previousSibling);e?i.map((i=>e.appendChild(i))):(this.wrapList(i,t.parentNode.nodeName),i.map((e=>e.parentNode)).map((e=>this.appendToPrevious(e))))}else $.each(i,((e,i)=>{$(i).css("marginLeft",((e,i)=>(parseInt(i,10)||0)+25))}))})),i.select()}outdent(e){const i=range.create(e).wrapBodyInlineWithPara(),t=i.nodes(dom.isPara,{includeAncestor:!0}),s=lists.clusterBy(t,func.peq2("parentNode"));$.each(s,((e,i)=>{const t=lists.head(i);dom.isLi(t)?this.releaseList([i]):$.each(i,((e,i)=>{$(i).css("marginLeft",((e,i)=>(i=parseInt(i,10)||0)>25?i-25:""))}))})),i.select()}toggleList(e,i){const t=range.create(i).wrapBodyInlineWithPara();let s=t.nodes(dom.isPara,{includeAncestor:!0});const o=t.paraBookmark(s),n=lists.clusterBy(s,func.peq2("parentNode"));if(lists.find(s,dom.isPurePara)){let i=[];$.each(n,((t,s)=>{i=i.concat(this.wrapList(s,e))})),s=i}else{const i=t.nodes(dom.isList,{includeAncestor:!0}).filter((i=>!$.nodeName(i,e)));i.length?$.each(i,((i,t)=>{dom.replace(t,e)})):s=this.releaseList(n,!0)}range.createFromParaBookmark(o,s).select()}wrapList(e,i){const t=lists.head(e),s=lists.last(e),o=dom.isList(t.previousSibling)&&t.previousSibling,n=dom.isList(s.nextSibling)&&s.nextSibling,r=o||dom.insertAfter(dom.create(i||"UL"),s);return e=e.map((e=>dom.isPurePara(e)?dom.replace(e,"LI"):e)),dom.appendChildNodes(r,e),n&&(dom.appendChildNodes(r,lists.from(n.childNodes)),dom.remove(n)),e}releaseList(e,i){let t=[];return $.each(e,((e,s)=>{const o=lists.head(s),n=lists.last(s),r=i?dom.lastAncestor(o,dom.isList):o.parentNode,d=r.parentNode;if("LI"===r.parentNode.nodeName)s.map((e=>{const i=this.findNextSiblings(e);d.nextSibling?d.parentNode.insertBefore(e,d.nextSibling):d.parentNode.appendChild(e),i.length&&(this.wrapList(i,r.nodeName),e.appendChild(i[0].parentNode))})),0===r.children.length&&d.removeChild(r),0===d.childNodes.length&&d.parentNode.removeChild(d);else{const e=r.childNodes.length>1?dom.splitTree(r,{node:n.parentNode,offset:dom.position(n)+1},{isSkipPaddingBlankHTML:!0}):null,t=dom.splitTree(r,{node:o.parentNode,offset:dom.position(o)},{isSkipPaddingBlankHTML:!0});s=i?dom.listDescendant(t,dom.isLi):lists.from(t.childNodes).filter(dom.isLi),!i&&dom.isList(r.parentNode)||(s=s.map((e=>dom.replace(e,"P")))),$.each(lists.from(s).reverse(),((e,i)=>{dom.insertAfter(i,r)}));const d=lists.compact([r,t,e]);$.each(d,((e,i)=>{const t=[i].concat(dom.listDescendant(i,dom.isList));$.each(t.reverse(),((e,i)=>{dom.nodeLength(i)||dom.remove(i,!0)}))}))}t=t.concat(s)})),t}appendToPrevious(e){return e.previousSibling?dom.appendChildNodes(e.previousSibling,[e]):this.wrapList([e],"LI")}findList(e){return e?lists.find(e.children,(e=>["OL","UL"].indexOf(e.nodeName)>-1)):null}findNextSiblings(e){const i=[];for(;e.nextSibling;)i.push(e.nextSibling),e=e.nextSibling;return i}}
//# sourceMappingURL=/sm/1abdcc74650bc915426755c86f011fd50e12e9095383a424235cc47a86ff05eb.map