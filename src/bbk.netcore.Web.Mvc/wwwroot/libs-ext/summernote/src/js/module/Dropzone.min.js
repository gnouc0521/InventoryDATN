/**
 * Minified by jsDelivr using Terser v5.9.0.
 * Original file: /npm/summernote@0.8.20/src/js/module/Dropzone.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import $ from"jquery";export default class Dropzone{constructor(e){this.context=e,this.$eventListener=$(document),this.$editor=e.layoutInfo.editor,this.$editable=e.layoutInfo.editable,this.options=e.options,this.lang=this.options.langInfo,this.documentEventHandlers={},this.$dropzone=$(['<div class="note-dropzone">','<div class="note-dropzone-message"></div>',"</div>"].join("")).prependTo(this.$editor)}initialize(){this.options.disableDragAndDrop?(this.documentEventHandlers.onDrop=e=>{e.preventDefault()},this.$eventListener=this.$dropzone,this.$eventListener.on("drop",this.documentEventHandlers.onDrop)):this.attachDragAndDropEvent()}attachDragAndDropEvent(){let e=$();const t=this.$dropzone.find(".note-dropzone-message");this.documentEventHandlers.onDragenter=o=>{const n=this.context.invoke("codeview.isActivated"),s=this.$editor.width()>0&&this.$editor.height()>0;n||e.length||!s||(this.$editor.addClass("dragover"),this.$dropzone.width(this.$editor.width()),this.$dropzone.height(this.$editor.height()),t.text(this.lang.image.dragImageHere)),e=e.add(o.target)},this.documentEventHandlers.onDragleave=t=>{e=e.not(t.target),e.length&&"BODY"!==t.target.nodeName||(e=$(),this.$editor.removeClass("dragover"))},this.documentEventHandlers.onDrop=()=>{e=$(),this.$editor.removeClass("dragover")},this.$eventListener.on("dragenter",this.documentEventHandlers.onDragenter).on("dragleave",this.documentEventHandlers.onDragleave).on("drop",this.documentEventHandlers.onDrop),this.$dropzone.on("dragenter",(()=>{this.$dropzone.addClass("hover"),t.text(this.lang.image.dropImage)})).on("dragleave",(()=>{this.$dropzone.removeClass("hover"),t.text(this.lang.image.dragImageHere)})),this.$dropzone.on("drop",(e=>{const t=e.originalEvent.dataTransfer;e.preventDefault(),t&&t.files&&t.files.length?(this.$editable.focus(),this.context.invoke("editor.insertImagesOrCallback",t.files)):$.each(t.types,((e,o)=>{if(o.toLowerCase().indexOf("_moz_")>-1)return;const n=t.getData(o);o.toLowerCase().indexOf("text")>-1?this.context.invoke("editor.pasteHTML",n):$(n).each(((e,t)=>{this.context.invoke("editor.insertNode",t)}))}))})).on("dragover",!1)}destroy(){Object.keys(this.documentEventHandlers).forEach((e=>{this.$eventListener.off(e.substr(2).toLowerCase(),this.documentEventHandlers[e])})),this.documentEventHandlers={}}}
//# sourceMappingURL=/sm/1cdb3b28234221f89d62f6356be9b4942a846da0ab3e096241f01b95fa3b3772.map