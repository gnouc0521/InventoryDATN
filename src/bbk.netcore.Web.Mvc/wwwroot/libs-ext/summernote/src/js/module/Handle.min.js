/**
 * Minified by jsDelivr using Terser v5.9.0.
 * Original file: /npm/summernote@0.8.20/src/js/module/Handle.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import $ from"jquery";import dom from"../core/dom";export default class Handle{constructor(t){this.context=t,this.$document=$(document),this.$editingArea=t.layoutInfo.editingArea,this.options=t.options,this.lang=this.options.langInfo,this.events={"summernote.mousedown":(t,e)=>{this.update(e.target,e)&&e.preventDefault()},"summernote.keyup summernote.scroll summernote.change summernote.dialog.shown":()=>{this.update()},"summernote.disable summernote.blur":()=>{this.hide()},"summernote.codeview.toggled":()=>{this.update()}}}initialize(){this.$handle=$(['<div class="note-handle">','<div class="note-control-selection">','<div class="note-control-selection-bg"></div>','<div class="note-control-holder note-control-nw"></div>','<div class="note-control-holder note-control-ne"></div>','<div class="note-control-holder note-control-sw"></div>','<div class="',this.options.disableResizeImage?"note-control-holder":"note-control-sizing",' note-control-se"></div>',this.options.disableResizeImage?"":'<div class="note-control-selection-info"></div>',"</div>","</div>"].join("")).prependTo(this.$editingArea),this.$handle.on("mousedown",(t=>{if(dom.isControlSizing(t.target)){t.preventDefault(),t.stopPropagation();const e=this.$handle.find(".note-control-selection").data("target"),o=e.offset(),i=this.$document.scrollTop(),n=t=>{this.context.invoke("editor.resizeTo",{x:t.clientX-o.left,y:t.clientY-(o.top-i)},e,!t.shiftKey),this.update(e[0],t)};this.$document.on("mousemove",n).one("mouseup",(t=>{t.preventDefault(),this.$document.off("mousemove",n),this.context.invoke("editor.afterCommand")})),e.data("ratio")||e.data("ratio",e.height()/e.width())}})),this.$handle.on("wheel",(t=>{t.preventDefault(),this.update()}))}destroy(){this.$handle.remove()}update(t,e){if(this.context.isDisabled())return!1;const o=dom.isImg(t),i=this.$handle.find(".note-control-selection");if(this.context.invoke("imagePopover.update",t,e),o){const e=$(t),o=e.position(),n={left:o.left+parseInt(e.css("marginLeft"),10),top:o.top+parseInt(e.css("marginTop"),10)},s={w:e.outerWidth(!1),h:e.outerHeight(!1)};i.css({display:"block",left:n.left,top:n.top,width:s.w,height:s.h}).data("target",e);const d=new Image;d.src=e.attr("src");const r=s.w+"x"+s.h+" ("+this.lang.image.original+": "+d.width+"x"+d.height+")";i.find(".note-control-selection-info").text(r),this.context.invoke("editor.saveTarget",t)}else this.hide();return o}hide(){this.context.invoke("editor.clearTarget"),this.$handle.children().hide()}}
//# sourceMappingURL=/sm/e51f0d52e7fc2dc56ddc491dbcad63a592cf65a82231b7b45f292d68f007d537.map