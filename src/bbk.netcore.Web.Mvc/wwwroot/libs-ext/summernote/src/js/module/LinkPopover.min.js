/**
 * Minified by jsDelivr using Terser v5.9.0.
 * Original file: /npm/summernote@0.8.20/src/js/module/LinkPopover.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import $ from"jquery";import lists from"../core/lists";import dom from"../core/dom";export default class LinkPopover{constructor(o){this.context=o,this.ui=$.summernote.ui,this.options=o.options,this.events={"summernote.keyup summernote.mouseup summernote.change summernote.scroll":()=>{this.update()},"summernote.disable summernote.dialog.shown":()=>{this.hide()},"summernote.blur":(o,t)=>{t.originalEvent&&t.originalEvent.relatedTarget&&this.$popover[0].contains(t.originalEvent.relatedTarget)||this.hide()}}}shouldInitialize(){return!lists.isEmpty(this.options.popover.link)}initialize(){this.$popover=this.ui.popover({className:"note-link-popover",callback:o=>{o.find(".popover-content,.note-popover-content").prepend('<span><a target="_blank"></a>&nbsp;</span>')}}).render().appendTo(this.options.container);const o=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",o,this.options.popover.link),this.$popover.on("mousedown",(o=>{o.preventDefault()}))}destroy(){this.$popover.remove()}update(){if(!this.context.invoke("editor.hasFocus"))return void this.hide();const o=this.context.invoke("editor.getLastRange");if(o.isCollapsed()&&o.isOnAnchor()){const t=dom.ancestor(o.sc,dom.isAnchor),e=$(t).attr("href");this.$popover.find("a").attr("href",e).text(e);const i=dom.posFromPlaceholder(t),s=$(this.options.container).offset();i.top-=s.top,i.left-=s.left,this.$popover.css({display:"block",left:i.left,top:i.top})}else this.hide()}hide(){this.$popover.hide()}}
//# sourceMappingURL=/sm/374d632ada3a50f6d341a80f370300d398154d107de7a7f3925a7ae0826fced8.map