(function(){function o(i){abp.message.confirm(app.localize("Xóa Ngày nghỉ"),app.localize("Bạn có chắc không"),r=>{r&&t.delete(i).done(()=>{abp.notify.success(app.localize("Xóa Ngày nghỉ thành công")),n()})})}function n(){f.ajax.reload()}var e=$("#dayOffTable"),t=abp.services.app.dayOff,i,r,u,f;moment.locale(abp.localization.currentLanguage.name);i=new app.ModalManager({viewUrl:abp.appPath+"PersonalProfile/DayOff/CreateDayOff",scriptUrl:abp.appPath+"view-resources/Areas/Oms/DayOffs/_CreateModal.js",modalClass:"DayOffCreateModal",modalType:"modal-xl"});r=new app.ModalManager({viewUrl:abp.appPath+"PersonalProfile/DayOff/EditDayOffModal",scriptUrl:abp.appPath+"view-resources/Areas/Oms/DayOffs/_EditModal.js",modalClass:"DayOffEditModal",modalType:"modal-xl"});$("#CreateNewButtonxx").click(function(){i.open()});u=function(){let n={};return n.searchTerm=$("#SearchTerm").val(),n};f=e.DataTable({paging:!0,serverSide:!1,processing:!0,searching:!1,language:{emptyTable:"Không tìm thấy dữ liệu",lengthMenu:"Hiển thị _MENU_ bản ghi"},bInfo:!1,bLengthChange:!0,lengthMenu:[[5,10,25,50,-1],[5,10,25,50,"Tất cả"],],pageLength:10,listAction:{ajaxFunction:t.getAll,inputFilter:u},columnDefs:[{targets:0,data:null,orderable:!1,autoWidth:!1,render:function(n,t,i){return`                        
                            <div class='dropdown d-inline-block'>
                            	<a href='#'' class='btn btn-sm btn-icon btn-outline-primary rounded-circle shadow-0' data-toggle='dropdown' aria-expanded='true' title='More options'>
                            		<i class="fal fa-ellipsis-v"></i>
                            	</a>
                            	<div class='dropdown-menu'>
                            		<a class='dropdown-item doceditfunc'data-objid='`+i.id+`'href='javascript:void(0); ' > Sửa </a>
                                    <a class='dropdown-item docdeletefunc'  data-objid='`+i.id+`' href='javascript:void(0);'> Xóa </a>
                            	</div>
                            </div>`}},{orderable:!0,targets:1,render:function(n,t,i,r){console.log(typeof r.row);var u=r.row+1;return"<span>"+u+"<\/span>"}},{orderable:!1,targets:2,data:"title"},{orderable:!1,targets:3,data:"startDate",render:function(n){return console.log("ddđ",n),moment(n).format("L")}},{targets:4,data:"endDate",render:function(n){return moment(n).format("L")}},{orderable:!0,targets:5,data:"sumDayOff"},{orderable:!0,targets:6,data:"typeDayOff",render:n=>`<span>${n==0?"Nghỉ thường":n==1?"Nghỉ phép":"Nghỉ lễ"}</span>`},]});abp.event.on("app.reloadDocTable",function(){n()});$("#dayOffTable").on("click",".doceditfunc",function(){var n=$(this),t={id:n[0].dataset.objid};r.open(t)});$("#dayOffTable").on("click",".docdeletefunc",function(){var n=$(this),t=n[0].dataset.objid;o(t)});$("#Search").click(function(t){t.preventDefault();n()});jQuery(document).ready(function(){$("#SearchTerm").focus()})})(jQuery),function(n){app.modals.DayOffCreateModal=function(){var r=abp.services.app.dayOff,t,i=null,u=[];this.init=function(f){t=f;i=t.getModal().find("form[name=frmCreate]");r.getAllDayOffsIf().done(function(t){console.log(t);n.each(t,function(n,t){u.push(t)});n(".date-picker").datepicker({rtl:!1,format:"dd/mm/yyyy",orientation:"left",autoclose:!0,datesDisabled:u,language:abp.localization.currentLanguage.name});n("#StartDate").datepicker({todayBtn:1,autoclose:!0}).on("changeDate",function(t){var i=new Date(t.date.valueOf());n("#EndDate").datepicker("setStartDate",i)});n("#EndDate").datepicker().on("changeDate",function(t){var i=new Date(t.date.valueOf());n("#StartDate").datepicker("setEndDate",i)})})};n(".close-modal").on("click",function(){abp.libs.sweetAlert.config={confirm:{icon:"warning",buttons:["Không","Có"]}};abp.message.confirm(app.localize("Đóng"),app.localize("Bạn có chắc không"),function(n){if(n)return t.close(),!0})});this.save=function(){let u=document.getElementById("selectColor");if(i.addClass("was-validated"),i[0].checkValidity()===!1){event.preventDefault();event.stopPropagation();return}var n=i.serializeFormToObject();n.TypeDayOff=u.options[u.selectedIndex].value;console.log("aaaaaaaaaaaaa",n);t.setBusy(!0);r.create(n).done(function(){t.close();abp.notify.info("Thêm mới thành công!");abp.event.trigger("app.reloadDocTable")}).always(function(){t.setBusy(!1)})}}}(jQuery),function(n){app.modals.DayOffEditModal=function(){var r=abp.services.app.dayOff,t,i=null,u=[];this.init=function(f){t=f;i=t.getModal().find("form[name=FrmEdit]");var e=n("#Id").val();r.get({id:e}).done(function(t){n("[name=selectColor]").val(t.typeDayOff).trigger("change")});r.getAllDayOffsIfById(e).done(function(t){n.each(t,function(n,t){u.push(t)});n(".date-picker").datepicker({rtl:!1,format:"dd/mm/yyyy",orientation:"left",autoclose:!0,datesDisabled:u});n("#StartDate").datepicker({todayBtn:1,autoclose:!0}).on("changeDate",function(t){var i=new Date(t.date.valueOf());n("#EndDate").datepicker("setStartDate",i)});n("#EndDate").datepicker().on("changeDate",function(t){var i=new Date(t.date.valueOf());n("#StartDate").datepicker("setEndDate",i)})})};n(".close-modal").on("click",function(){abp.libs.sweetAlert.config={confirm:{icon:"warning",buttons:["Không","Có"]}};abp.message.confirm(app.localize("Đóng"),app.localize("Bạn có chắc không"),function(n){if(n)return t.close(),!0})});this.save=function(){let n=document.getElementById("selectColor");if(i.addClass("was-validated"),i[0].checkValidity()===!1){event.preventDefault();event.stopPropagation();return}var u=i.serializeFormToObject();u.TypeDayOff=n.options[n.selectedIndex].value;t.setBusy(!0);r.update(u).done(function(){t.close();abp.notify.info("Cập nhật thành công!");abp.event.trigger("app.reloadDocTable")}).always(function(){t.setBusy(!1)})}}}(jQuery);