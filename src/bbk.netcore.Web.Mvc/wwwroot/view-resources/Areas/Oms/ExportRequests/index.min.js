(function(){function i(){n.ajax.reload();h.ajax.reload()}var f=$("#ExportTable"),e=$("#ExportRequimentTable"),t=abp.services.app.exportRequests,r,u;moment.locale(abp.localization.currentLanguage.name);r=new app.ModalManager({viewUrl:abp.appPath+"Inventorys/ExportRequests/CreateExportRequests",scriptUrl:abp.appPath+"view-resources/Areas/Oms/ExportRequests/_CreateModal.js",modalClass:"ExportRequestsCreateModal",modalType:"modal-xl"});u=new app.ModalManager({viewUrl:abp.appPath+"Inventorys/ExportRequests/EditExportRequests",scriptUrl:abp.appPath+"view-resources/Areas/Oms/ExportRequests/_EditModal.js",modalClass:"ExportRequestsEditModal",modalType:"modal-xl"});$("#CreateNewButtonxx").click(function(){r.open()});$(".date-picker").datepicker({rtl:!1,format:"dd/mm/yyyy",orientation:"left",autoclose:!0,language:abp.localization.currentLanguage.name});var o=function(){let n={};return n.status=0,n.exportStatus=0,n},n=f.DataTable({paging:!0,serverSide:!1,processing:!1,searching:!0,language:{emptyTable:"Không tìm thấy dữ liệu",lengthMenu:"Hiển thị _MENU_ bản ghi"},ordering:!1,bInfo:!1,bLengthChange:!0,lengthMenu:[[5,10,25,50,-1],[5,10,25,50,"Tất cả"],],pageLength:10,listAction:{ajaxFunction:t.getAll,inputFilter:o},columnDefs:[{targets:0,orderable:!1,className:"dt-body-center text-center",render:function(n,t,i,r){return r.row+1}},{orderable:!0,targets:1,data:"code",render:function(n,t,i){return`
                            <a class='Exportviewfunc'  data-objid='`+i.id+`' href='javascript:void(0);'>`+i.code+` </a>`}},{orderable:!1,targets:2,data:"codeRequirement",render:function(n,t,i){return i.codeTransfer==null||i.codeTransfer==""?i.codeRequirement:i.codeTransfer}},{orderable:!1,targets:3,data:"warehouseDestinationName"},{orderable:!1,targets:4,data:null,render:function(n,t,i){return i.requestType==0?i.listWarehouseSourceName:i.requestType==1?i.subsidiaryName==null?`
                            <a class='Exportviewfunc'  data-objid='`+i.id+`' href='javascript:void(0);'>`+i.code+` </a>`:i.subsidiaryName:void 0}},{orderable:!1,targets:5,data:"creationTime",render:function(n){return moment(n).format("L")}},{orderable:!1,targets:6,data:null,render:function(n,t,i){return i.status==4?moment(i.lastModificationTime).format("L"):`<span></span>`}},{orderable:!0,"class":"text-center",targets:7,data:"status",render:function(n,t,i){return i.exportStatus==1?`<span class="btn btn-outline-primary btn-pills btn-sm btn-w-m  mr-1 waves-effect waves-themed span_status span-defaut"> Chưa xuất hàng</span>`:`<span class="btn btn-outline-secondary btn-pills btn-sm btn-w-m  mr-1 waves-effect waves-themed span_status span-approve">Đã xuất hàng</span>`}},{targets:8,data:"id","class":"text-center",orderable:!1,autoWidth:!1,render:function(n,t,i){if(i.status==0){var r="";return abp.auth.isGranted("Inventorys.ExportRequests.Edit")&&(r=`<a class='dropdown-item doceditfunc'data-objid='`+i.id+`'href='javascript:void(0); ' ><i class="fal fa-edit"></i> Chỉnh Sửa </a>`),`                        
                            <div class='dropdown d-inline-block'>
                            	<a href='#'' class='btn btn-sm btn-icon btn-outline-primary rounded-circle shadow-0' data-toggle='dropdown' aria-expanded='true' title='More options'>
                            		<i class="fal fa-ellipsis-v"></i>
                            	</a>
                            	<div class='dropdown-menu'>
                            		<a class='dropdown-item docprintfunc'data-objid='`+i.id+`'href='javascript:void(0); ' ><i class="fal fa-print"></i> In phiếu</a>
                            		<a class='dropdown-item docview'data-objid='`+i.id+`'href='javascript:void(0); ' ><i class="fal fa-eye"></i> Chi tiết </a>
                                    `+r+`
                            	</div>
                            </div>`}return`                        
                            <div class='dropdown d-inline-block'>
                            	<a href='#'' class='btn btn-sm btn-icon btn-outline-primary rounded-circle shadow-0' data-toggle='dropdown' aria-expanded='true' title='More options'>
                            		<i class="fal fa-ellipsis-v"></i>
                            	</a>
                            	<div class='dropdown-menu'>
                            		<a class='dropdown-item docprintfunc'data-objid='`+i.id+`'href='javascript:void(0); ' ><i class="fal fa-print"></i> In phiếu</a>
                            		<a class='dropdown-item docview'data-objid='`+i.id+`'href='javascript:void(0); ' ><i class="fal fa-eye"></i> Chi tiết </a>
                            	</div>
                            </div>`}},]}),s=function(){let n={};return n.status=0,n.exportStatus=0,n},h=e.DataTable({paging:!0,serverSide:!1,processing:!1,searching:!0,language:{emptyTable:"Không tìm thấy dữ liệu",lengthMenu:"Hiển thị _MENU_ bản ghi"},ordering:!1,bInfo:!1,bLengthChange:!0,lengthMenu:[[5,10,25,50,-1],[5,10,25,50,"Tất cả"],],pageLength:10,listAction:{ajaxFunction:t.getAll,inputFilter:s},columnDefs:[{targets:0,orderable:!1,className:"dt-body-center text-center",render:function(n,t,i,r){return r.row+1}},{orderable:!0,targets:1,data:"codeRequirement",render:function(n,t,i){return`
                            <a class='Exportviewfunc'  data-objid='`+i.id+`' href='javascript:void(0);'>`+i.codeRequirement+` </a>`}},{orderable:!1,targets:2,data:"warehouseDestinationName"},{orderable:!1,targets:3,data:null,render:function(n,t,i){return i.subsidiaryName}},{orderable:!1,targets:4,data:"creationTime",render:function(n){return moment(n).format("L")}},{orderable:!1,targets:5,data:null,render:function(n,t,i){return i.status==3?moment(i.lastModificationTime).format("L"):`<span></span>`}},{targets:6,data:"id","class":"text-center",orderable:!1,autoWidth:!1,render:function(n,t,i){return` <button id="Create-Export" name="CreateExport" class="btn btn-sm btn-toolbar-full btn-primary ml-auto Create-Export" data-objid=`+i.id+`>
                                Tạo phiếu xuất
                                </button>`}},]});$("#ExportRequimentTable").on("click",".Create-Export",function(){var n=$(this),t={id:n[0].dataset.objid};abp.ajax({contentType:"application/x-www-form-urlencoded",url:abp.appPath+"Inventorys/ExportRequests/OverView?Id="+t.id,success:function(n){window.location.href="/Inventorys/ExportRequests/ExportRequirementDetail?id="+n.id}})});$("#ExportRequimentTable").on("click",".Exportviewfunc",function(){var n=$(this),t={id:n[0].dataset.objid};abp.ajax({contentType:"application/x-www-form-urlencoded",url:abp.appPath+"Inventorys/ExportRequests/OverView?Id="+t.id,success:function(n){window.location.href="/Inventorys/ExportRequests/ExportRequirementDetail?id="+n.id}})});$("#example-select-all").on("click",function(){var i=n.rows({search:"applied"}).nodes(),t;$('input[type="checkbox"]',i).prop("checked",this.checked);$("#DeleteAll").removeAttr("disabled");t=[];$('#ExportTable tbody input[type="checkbox"]:checked').each(function(){t.push($(this))});t.length>0?$("#DeleteAll").removeAttr("disabled"):$("#DeleteAll").prop("disabled",!0)});$("#ExportTable tbody").on("change",'input[type="checkbox"]',function(){var t=[],n;$('#ExportTable tbody input[type="checkbox"]:checked').each(function(){t.push($(this))});t.length>0?$("#DeleteAll").removeAttr("disabled"):$("#DeleteAll").prop("disabled",!0);this.checked||(n=$("#example-select-all").get(0),n&&n.checked&&"indeterminate"in n&&(n.indeterminate=!0))});n.$('input[type="checkbox"]').each(function(n,t){t>0&&$("#DeleteAll").removeAttr("disabled")});$("#DeleteAll").on("click",function(){abp.message.confirm(app.localize("Bạn có chắc chắn muốn xóa hàng hóa"),app.localize("Xóa hàng hóa"),function(r){r&&n.$('input[type="checkbox"]').each(function(n,r){$(r).is(":checked")&&t.delete($(r).val()).done(function(){$("#example-select-all").prop("checked",!1);abp.notify.info(app.localize("Tạo phiếu xuất thành công"));i()})})})});abp.event.on("app.reloadDocTable",function(){i()});$("#ExportTable").on("click",".docview",function(){var n=$(this),t={id:n[0].dataset.objid};abp.ajax({contentType:"application/x-www-form-urlencoded",url:abp.appPath+"Inventorys/ExportRequests/OverView?Id="+t.id,success:function(n){window.location.href="/Inventorys/ExportRequests/ViewDetails?id="+n.id}})});$("#ExportTable").on("click",".Exportviewfunc",function(){var n=$(this),t={id:n[0].dataset.objid};abp.ajax({contentType:"application/x-www-form-urlencoded",url:abp.appPath+"Inventorys/ExportRequests/OverView?Id="+t.id,success:function(n){window.location.href="/Inventorys/ExportRequests/ViewDetails?id="+n.id}})});$("#ExportTable").on("click",".doceditfunc",function(){var n=$(this),t={id:n[0].dataset.objid};u.open(t)});$("#ExportTable").on("click",".docprintfunc",function(){var n=$(this),t={id:n[0].dataset.objid};abp.ajax({contentType:"application/x-www-form-urlencoded",url:abp.appPath+"Inventorys/ExportRequests/OverView?Id="+t.id,success:function(n){window.location.href="/Inventorys/ExportRequests/Print?id="+n.id}})});$("#Search").click(function(n){n.preventDefault();i()});jQuery(document).ready(function(){$("#SearchTerm").focus()})})(jQuery);