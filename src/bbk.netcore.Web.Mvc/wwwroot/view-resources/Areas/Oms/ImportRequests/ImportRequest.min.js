(function(){function l(){c.ajax.reload()}function a(){h.ajax.reload()}function i(){t.ajax.reload()}function i(){t.ajax.reload()}var r=$("#ImportRequestTable"),u=$("#TransferRequestTable"),f=$("#UpdateImportRequestTable"),n=abp.services.app.importRequest,e=abp.services.app.transfer;moment.locale(abp.localization.currentLanguage.name);var o=new app.ModalManager({viewUrl:abp.appPath+"Inventorys/ImportRequest/CreateImportRequest",scriptUrl:abp.appPath+"view-resources/Areas/Oms/ImportRequests/_CreateModal.js",modalClass:"ImportRequestCreateModal",modalType:"modal-xl"}),s=new app.ModalManager({viewUrl:abp.appPath+"Inventorys/ImportRequest/EditImportRequestModal",scriptUrl:abp.appPath+"view-resources/Areas/Oms/ImportRequests/_EditModal.js",modalClass:"ImportRequestEditModal",modalType:"modal-xl"}),v=new app.ModalManager({viewUrl:abp.appPath+"Inventorys/ImportRequest/ViewDetails",scriptUrl:abp.appPath+"view-resources/Areas/Oms/ImportRequests/ViewDetail.js",modalClass:"ViewModal",modalType:"modal-xl"});$(".date-picker").datepicker({rtl:!1,format:"dd/mm/yyyy",orientation:"left",autoclose:!0,language:abp.localization.currentLanguage.name});var y=function(){let t=document.getElementById("WarehouseDestinationId");var i=$("#RequestDate").datepicker("getDate");let n={};return n.searchTerm=$("#SearchTerm").val(),n.warehouseDestinationId=$("#WarehouseDestinationId :selected").val(),n.creatorById=$("#NameRequest :selected").val(),n.status=$("#Status :selected").val(),n.warehouseDestinationId=t.options[t.selectedIndex].value,i!=null&&(dateStart=moment(i).format("L"),n.resquestDate=dateStart),n},h=u.DataTable({paging:!0,serverSide:!1,processing:!0,searching:!0,language:{emptyTable:"Không tìm thấy dữ liệu",lengthMenu:"Hiển thị _MENU_ bản ghi",zeroRecords:"Không tìm thấy dữ liệu",searchPlaceholder:"Tìm kiếm"},bInfo:!1,bLengthChange:!0,lengthMenu:[[5,10,25,50,-1],[5,10,25,50,"Tất cả"],],pageLength:10,listAction:{ajaxFunction:e.getTransferImp},order:[[0,"asc"]],columnDefs:[{orderable:!1,className:"dt-body-center text-center",targets:0,data:null,render:function(n,t,i,r){return r.row+1}},{orderable:!1,targets:1,data:"transferCode"},{orderable:!1,targets:2,data:"nameWareHouseReceiving"},{orderable:!1,targets:3,data:"nameWareHouseExport"},{orderable:!1,targets:4,data:"creationTime",render:function(n){return moment(n).format("L")}},{orderable:!1,targets:5,data:"browsingTime",render:function(n){return moment(n).format("L")}},{targets:6,"class":"text-center",orderable:!1,render:function(n,t,i){return i.statusImportPrice==!0?"<a type='button' class='btn btn-primary btn-sm disabled' style='margin-left:5px'><i class='fal fa-check'><\/i> Tạo phiếu nhập<\/a>":` <a type = 'button' class='btn btn-primary btn-sm impcreatefunc' data-objid='`+i.id+`'href = 'javascript:void(0);' style = 'margin-left:5px'><i class='fa fa-plus'></i> Tạo phiếu nhập</a>`}}]}),t=r.DataTable({paging:!0,serverSide:!1,processing:!0,searching:!0,language:{emptyTable:"Không tìm thấy dữ liệu",lengthMenu:"Hiển thị _MENU_ bản ghi",zeroRecords:"Không tìm thấy dữ liệu",searchPlaceholder:"Tìm kiếm"},bInfo:!1,bLengthChange:!0,lengthMenu:[[5,10,25,50,-1],[5,10,25,50,"Tất cả"],],pageLength:10,listAction:{ajaxFunction:n.getAll},order:[[0,"asc"]],columnDefs:[{orderable:!1,className:"dt-body-center text-center",targets:0,data:null,render:function(n,t,i,r){return r.row+1}},{orderable:!1,targets:1,data:"code",render:function(n,t,i){return`
                        <a class="viewwork" data-objid='`+i.id+`' href='javascript:void(0); '>`+i.code+`</a>
                    `}},{orderable:!1,targets:2,data:"nameWareHouse"},{orderable:!1,targets:3,data:"createdBy"},{orderable:!1,targets:4,data:"requestDate",render:function(n){return moment(n).format("L")}},{orderable:!1,targets:5,data:"importStatus",render:function(n,t,i){return i.importStatus==0?`<span class="btn btn-outline-primary btn-pills btn-sm btn-w-m  mr-1 waves-effect waves-themed">Đã nhận hàng</span>`:`<span class="btn btn-outline-secondary btn-pills btn-sm btn-w-m  mr-1 waves-effect waves-themed">Chờ nhận hàng</span>`}},]}),c=f.DataTable({paging:!0,serverSide:!1,processing:!0,searching:!0,language:{emptyTable:"Không tìm thấy dữ liệu",lengthMenu:"Hiển thị _MENU_ bản ghi",zeroRecords:"Không tìm thấy dữ liệu",searchPlaceholder:"Tìm kiếm"},bInfo:!1,bLengthChange:!0,lengthMenu:[[5,10,25,50,-1],[5,10,25,50,"Tất cả"],],pageLength:10,listAction:{ajaxFunction:n.getAll},order:[[0,"asc"]],columnDefs:[{orderable:!1,className:"dt-body-center text-center",targets:0,data:null,render:function(n,t,i,r){return r.row+1}},{orderable:!1,targets:1,data:"code",render:function(n,t,i){return`
                        <a class="viewwork" data-objid='`+i.id+`' href='javascript:void(0); '>`+i.code+`</a>
                    `}},{orderable:!1,targets:2,data:"nameWareHouse"},{orderable:!1,targets:3,data:"createdBy"},{orderable:!1,targets:4,data:"requestDate",render:function(n){return moment(n).format("L")}},{orderable:!1,targets:5,data:"requestDate",render:function(n){return moment(n).format("L")}},{orderable:!1,targets:6,data:"importStatus",render:function(n,t,i){return i.importStatus==0?`<span class="btn btn-outline-primary btn-pills btn-sm btn-w-m  mr-1 waves-effect waves-themed">Đã nhận hàng</span>`:`<span class="btn btn-outline-secondary btn-pills btn-sm btn-w-m  mr-1 waves-effect waves-themed">Chờ nhận hàng</span>`}},{targets:7,"class":"text-center",orderable:!1,render:function(n,t,i){return i.importStatus==0?"<a type='button' class='btn btn-primary btn-sm disabled ' style='margin-left:5px'><i class='fal fa-check'><\/i> Cập nhật<\/a>":` <a type = 'button' class='btn btn-primary btn-sm impeditfunc' data-objid='`+i.id+`'href = 'javascript:void(0);' style = 'margin-left:5px'><i class='fa fa-edit'></i> Cập nhật</a>`}}]});$("#TransferRequestTable").on("click",".impcreatefunc",function(){var n=$(this),t={id:n[0].dataset.objid};o.open(t)});$("#UpdateImportRequestTable").on("click",".impeditfunc",function(){var n=$(this),t={id:n[0].dataset.objid};s.open(t)});$("#ImportRequestTable").on("click",".viewwork",function(){var n=$(this),t={id:n[0].dataset.objid};abp.ajax({contentType:"application/x-www-form-urlencoded",url:abp.appPath+"Inventorys/ImportRequest/OverView?Id="+t.id,success:function(n){window.location.href="/Inventorys/ImportRequest/ViewDetails?id="+n.id}})});$("#UpdateImportRequestTable").on("click",".viewwork",function(){var n=$(this),t={id:n[0].dataset.objid};abp.ajax({contentType:"application/x-www-form-urlencoded",url:abp.appPath+"Inventorys/ImportRequest/OverView?Id="+t.id,success:function(n){window.location.href="/Inventorys/ImportRequest/ViewUpdateDetails?id="+n.id}})});abp.event.on("app.reloadDocTable",function(){i()});abp.event.on("app.reloadTranferTable",function(){a()});abp.event.on("app.reloadDoneTable",function(){l()});$("#Search").click(function(n){n.preventDefault();i()});jQuery(document).ready(function(){$("#SearchTerm").focus()})})(jQuery);