(function(){function r(n,t){return{type:"doughnut",data:{labels:n,datasets:[{backgroundColor:["#24c7a0","#058515","#0094f2","#ec3b48",],data:[0,0,0,0],datalabels:{labels:{value:{color:"#000"}}}}]},options:{plugins:{datalabels:{formatter:n=>{if(n==0)return""},display:!0,align:"center",borderRadius:3,font:{size:16}}},legend:{display:!1},legendCallback:function(n){var r=[],u,f,i,e;for(r.push('<ul class="'+t+'-legend">'),u=n.data.datasets[0],f=u.data.reduce(function(n,t){return n+t},0),i=0;i<u.data.length;i++)r.push("<li>"),e=Math.round(100*u.data[i]/f,0),r.push('<input type="checkbox" class="check-input" checked name="check'+i+'"/><span style="background-color:'+u.backgroundColor[i]+'"><\/span>'+n.data.labels[i]),r.push("<\/li>");return r.push("<\/ul>"),r.join("")}}}}function u(n){var t;for(n=n||window.event,t=n.target||n.srcElement;t.nodeName!=="LI";)t=t.parentElement;var u=t.parentElement,e=parseInt(u.classList[0].split("-")[0],10),f=Chart.instances[e],i=Array.prototype.slice.call(u.children).indexOf(t),o=f.getDatasetMeta(0),r=o.data[i];console.log(i);r.hidden===null||r.hidden===!1?(r.hidden=!0,t.classList.add("hidden"),$(this).find('input[name="check'+i+'"]').prop("checked",!1)):(t.classList.remove("hidden"),r.hidden=null,$(this).find('input[name="check'+i+'"]').prop("checked",!0));f.update()}function a(){v.getAllByTime(y()).done(function(n){for(var i=0,s=0,h=0,c=0,l=0,r=0,a=0,v=0,y=0,p=0,u=0,w=0,b=0,k=0,d=0,t=0;t<n.items.length;t++)n.items[t].ownerStatusEnum==4&&(n.items[t].status==2&&(a+=1,r+=1),n.items[t].status==1&&(v+=1,r+=1),n.items[t].status==3&&(p+=1,r+=1),n.items[t].status==0&&(y+=1,r+=1)),n.items[t].ownerStatusEnum==1&&(n.items[t].status==2&&(s+=1,i+=1),n.items[t].status==1&&(h+=1,i+=1),n.items[t].status==3&&(l+=1,i+=1),n.items[t].status==0&&(c+=1,i+=1)),n.items[t].ownerStatusEnum==2&&(n.items[t].status==2&&(w+=1,u+=1),n.items[t].status==1&&(b+=1,u+=1),n.items[t].status==3&&(d+=1,u+=1),n.items[t].status==0&&(k+=1,u+=1));f.config.data.datasets[0].data=[s,h,c,l];e.data.datasets[0].data=[a,v,y,p];o.data.datasets[0].data=[w,b,k,d];$("#sumdg").html(i);$("#sumdag").html(r);$("#sumph").html(u);$("#sumtg").html(0);f.update();e.update();o.update()})}var v=abp.services.app.work,t,n;moment.locale(abp.localization.currentLanguage.name);$(".date-picker").datepicker({rtl:!1,dateFormat:"dd-mm--yy",orientation:"bottom left",autoclose:!0,language:abp.localization.currentLanguage.name});var y=function(){let n={};return $("#FromDate").datepicker(),$("#ToDate").datepicker(),fromDate=$("#FromDate").datepicker("getDate"),toDate=$("#ToDate").datepicker("getDate"),fromDate!=null&&(dateStart=moment(fromDate).format("L"),n.fromDate=dateStart),toDate!=null&&(dateEnd=moment(toDate).format("L"),n.toDate=dateEnd),n},g=$("#UserId").val(),i=["Hoàn thành","Đang xử lý","Chờ xử lý","Quá hạn"],p=document.getElementById("assignedChart").getContext("2d"),f=new Chart(p,r(i,0)),s=document.getElementById("legend");for(s.innerHTML=f.generateLegend(),t=s.getElementsByTagName("li"),n=0;n<t.length;n+=1)t[n].addEventListener("click",u,!1);var w=document.getElementById("deliveredChart").getContext("2d"),e=new Chart(w,r(i,1)),h=document.getElementById("legendDelivered");for(h.innerHTML=e.generateLegend(),t=h.getElementsByTagName("li"),n=0;n<t.length;n+=1)t[n].addEventListener("click",u,!1);var b=document.getElementById("combinationChart").getContext("2d"),o=new Chart(b,r(i,2)),c=document.getElementById("combinationDelivered");for(c.innerHTML=o.generateLegend(),t=c.getElementsByTagName("li"),n=0;n<t.length;n+=1)t[n].addEventListener("click",u,!1);var k=document.getElementById("followChart").getContext("2d"),d=new Chart(k,r(i,3)),l=document.getElementById("followDelivered");for(l.innerHTML=d.generateLegend(),t=l.getElementsByTagName("li"),n=0;n<t.length;n+=1)t[n].addEventListener("click",u,!1);a();$("#Search").click(function(){a()})})(jQuery);