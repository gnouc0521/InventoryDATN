(function(){function n(){f.getAll(u()).done(function(n){var t=[],u,f;for(i=0;i<n.totalCount;i++){let r=n.items[i].endDay.slice(0,10);n.items[i].color==0&&t.push({id:n.items[i].id,title:n.items[i].title,start:n.items[i].startDay,end:n.items[i].endDay,backgroundColor:"lightblue"});n.items[i].color==1&&t.push({id:n.items[i].id,title:n.items[i].title,start:n.items[i].startDay,end:n.items[i].endDay,backgroundColor:"lightgreen"});n.items[i].color==2&&t.push({id:n.items[i].id,title:n.items[i].title,start:n.items[i].startDay,end:n.items[i].endDay,backgroundColor:"lightcoral"})}u=document.getElementById("calendar");f=new FullCalendar.Calendar(u,{locale:"vi",plugins:["dayGrid","list","timeGrid","interaction","bootstrap"],themeSystem:"bootstrap",timeZone:"UTC",dateAlignment:"month",buttonText:{today:"Hôm nay",month:"Tháng",week:"Tuần",day:"Ngày",list:"Danh sách"},eventTimeFormat:{hour:"numeric",minute:"2-digit",meridiem:"short"},navLinks:!0,header:{left:"prev,next today addEventButton",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listWeek"},footer:{left:"",center:"",right:""},events:t,eventClick:function(n){var t={Id:n.event.id};r.open(t)}});f.render()})}var f=abp.services.app.scheduleWork,t,r,u;moment.locale(abp.localization.currentLanguage.name);t=new app.ModalManager({viewUrl:abp.appPath+"PersonalProfile/ScheduleWork/CreateScheduleWork",scriptUrl:abp.appPath+"view-resources/Areas/Oms/ScheduleWorks/_CreateModal.js",modalClass:"ScheduleWorkCreateModal",modalType:"modal-xl"});r=new app.ModalManager({viewUrl:abp.appPath+"PersonalProfile/ScheduleWork/EditScheduleWorkModal",scriptUrl:abp.appPath+"view-resources/Areas/Oms/ScheduleWorks/_EditModal.js",modalClass:"ScheduleWorkEditModal",modalType:"modal-xl"});$("#CreateNewButtonxx").click(function(){t.open()});u=function(){let t=document.getElementById("list-level"),n={};return n.searchTerm=$("#SearchTerm").val().toLocaleLowerCase(),n.idLevel=t.options[t.selectedIndex].value,n};n();$("#Search").click(function(){$("#calendar").empty();n()});abp.event.on("app.reloadCalendar",function(){n()})})(jQuery),function(n){app.modals.ScheduleWorkCreateModal=function(){var r=abp.services.app.scheduleWork,t,i=null;this.init=function(r){t=r;i=t.getModal().find("form[name=frmCreate]");n("#Description").summernote({height:270,forcus:!0});let u=document.getElementById("StartDay"),f=document.getElementById("EndDay");u.min=(new Date).toISOString().slice(0,(new Date).toISOString().lastIndexOf(":"));n("#EndDay").on("click",function(){n("#StartDay").val()==""?u.min=(new Date).toISOString().slice(0,(new Date).toISOString().lastIndexOf(":")):f.min=new Date(n("#StartDay").val()).toISOString().slice(0,(new Date).toISOString().lastIndexOf(":"))});n("#StartDay").on("click",function(){n("#EndDay").val()==""?u.min=(new Date).toISOString().slice(0,(new Date).toISOString().lastIndexOf(":")):u.max=new Date(n("#EndDay").val()).toISOString().slice(0,(new Date).toISOString().lastIndexOf(":"))})};n(".close-modal").on("click",function(){abp.libs.sweetAlert.config={confirm:{icon:"warning",buttons:["Không","Có"]}};abp.message.confirm(app.localize("Đóng"),app.localize("Bạn có chắc không"),function(n){if(n)return t.close(),!0})});this.save=function(){var e,u;let f=document.getElementById("selectColor");if(console.log("aaaaaaaaaaaaaaaa",f.options[f.selectedIndex].value),e=n("#Description").summernote("code"),i.addClass("was-validated"),i[0].checkValidity()===!1){event.preventDefault();event.stopPropagation();return}u=i.serializeFormToObject();u.Description=e;u.Repeat=null;u.Color=f.options[f.selectedIndex].value;console.log("aaaaaaaaaaaaa",u);t.setBusy(!0);r.create(u).done(function(){t.close();abp.notify.info("Thêm mới thành công!");n("#calendar").empty();abp.event.trigger("app.reloadCalendar")}).always(function(){t.setBusy(!1)})}}}(jQuery);