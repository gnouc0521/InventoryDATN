(function(){function t(){n.ajax.reload()}var e=$("#unitsTable"),i=abp.services.app.unitService,r,u,f,n;moment.locale(abp.localization.currentLanguage.name);r=new app.ModalManager({viewUrl:abp.appPath+"Inventorys/Units/CreateUnits",scriptUrl:abp.appPath+"view-resources/Areas/Oms/Units/_CreateModal.js",modalClass:"UnitsCreateModal",modalType:"modal-xl"});u=new app.ModalManager({viewUrl:abp.appPath+"Inventorys/Units/EditUnitsModal",scriptUrl:abp.appPath+"view-resources/Areas/Oms/Units/_EditModal.js",modalClass:"UnitsEditModal",modalType:"modal-xl"});$("#CreateNewButtonxx").click(function(){r.open()});f=function(){let n={};return n.searchTerm=$("#SearchTerm").val(),n};n=e.DataTable({paging:!0,serverSide:!1,processing:!0,searching:!1,language:{emptyTable:"Không tìm thấy dữ liệu",lengthMenu:"Hiển thị _MENU_ bản ghi"},bInfo:!1,bLengthChange:!0,lengthMenu:[[5,10,25,50,-1],[5,10,25,50,"Tất cả"],],pageLength:10,listAction:{ajaxFunction:i.getAll,inputFilter:f},order:[[1,"asc"]],columnDefs:[{targets:0,orderable:!1,className:"dt-body-center text-center",render:function(n,t,i){return'<input type="checkbox" name="" value="'+i.id+'">'}},{orderable:!0,targets:1,data:"name"},{orderable:!0,targets:2,data:"description"},{targets:3,data:"id",orderable:!1,autoWidth:!1,className:"text-center",render:function(n,t,i){return console.log(i),`<a class='btn btn-warning doceditfunc text-right text-white' data-objid='`+i.id+`'href='javascript:void(0); ' > Sửa </a>`}},]});$("#Search").click(function(){t()});abp.event.on("app.reloadDocTable",function(){t()});jQuery(document).ready(function(){$("#SearchTerm").focus()});$("#example-select-all").on("click",function(){var i=n.rows({search:"applied"}).nodes(),t;$('input[type="checkbox"]',i).prop("checked",this.checked);$("#DeleteAll").removeAttr("disabled");t=[];$('#unitsTable tbody input[type="checkbox"]:checked').each(function(){t.push($(this))});t.length>0?$("#DeleteAll").removeAttr("disabled"):$("#DeleteAll").prop("disabled",!0)});$("#unitsTable tbody").on("change",'input[type="checkbox"]',function(){var t=[],n;$('#unitsTable tbody input[type="checkbox"]:checked').each(function(){t.push($(this))});t.length>0?$("#DeleteAll").removeAttr("disabled"):$("#DeleteAll").prop("disabled",!0);this.checked||(n=$("#example-select-all").get(0),console.log(n),n&&n.checked&&"indeterminate"in n&&(n.indeterminate=!0))});n.$('input[type="checkbox"]').each(function(n,t){t>0&&$("#DeleteAll").removeAttr("disabled")});$("#DeleteAll").on("click",function(){abp.message.confirm(app.localize("Xóa quy cách","Quy cách"),app.localize("Bạn có chắc không"),function(r){r&&n.$('input[type="checkbox"]').each(function(n,r){$(r).is(":checked")&&i.delete($(r).val()).done(function(){$("#example-select-all").prop("checked",!1);abp.notify.success(app.localize("Xóa quy cách thành công"));t()});console.log($(r).val())})})});$("#unitsTable").on("click",".doceditfunc",function(){var n=$(this),t={id:n[0].dataset.objid};u.open(t)})})(jQuery),function(n){app.modals.UnitsCreateModal=function(){var u=abp.services.app.unitService,t,i=null,r={};this.init=function(n){t=n;i=t.getModal().find("form[name=frmCreate]")};n(".close-modal").on("click",function(){abp.libs.sweetAlert.config={confirm:{icon:"warning",buttons:["Không","Có"]}};abp.message.confirm(app.localize("Đóng"),app.localize("Bạn có chắc không"),function(n){if(n)return t.close(),!0})});this.save=function(){if(console.log("aaaaaaaaaaaaa"),i.addClass("was-validated"),i[0].checkValidity()===!1){console.log(i[0]);event.preventDefault();event.stopPropagation();return}var n=i.serializeFormToObject();n.ParrentId==0&&(n.ParrentId=null);t.setBusy(!0);u.create(n).done(function(i){console.log(i);r.id=i;r.name=n.Name;r.description=n.Description;r.parrentId==n.ParrentId;t.close();abp.notify.info("Thêm mới thành công!");abp.event.trigger("app.reloadDocTable")}).always(function(){t.setBusy(!1)})}}}(jQuery),function(n){app.modals.UnitsEditModal=function(){var r=abp.services.app.unitService,t,i=null;this.init=function(n){t=n;i=t.getModal().find("form[name=FrmEdit]")};n(".close-modal").on("click",function(){abp.libs.sweetAlert.config={confirm:{icon:"warning",buttons:["Không","Có"]}};abp.message.confirm(app.localize("Đóng"),app.localize("Bạn có chắc không"),function(n){if(n)return t.close(),!0})});this.save=function(){if(i.addClass("was-validated"),i[0].checkValidity()===!1){event.preventDefault();event.stopPropagation();return}var n=i.serializeFormToObject();t.setBusy(!0);r.update(n).done(function(){t.close();abp.notify.info("Cập nhật thành công!");abp.event.trigger("app.reloadDocTable")}).always(function(){t.setBusy(!1)})}}}(jQuery);