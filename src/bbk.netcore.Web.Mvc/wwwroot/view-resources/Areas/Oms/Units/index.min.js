(function(){function o(){$(".btnDelete").click(function(){var t=$(this),i=t.closest(".card-point");console.log(i);t;abp.message.confirm(app.localize("Xóa đơn vị tính","Đơn vị tính"),app.localize("Bạn có chắc không"),r=>{r&&n.delete(t[0].dataset.units).done(()=>{i.empty(),abp.notify.success(app.localize("Xóa đơn vị tính thành công"))})})})}function r(){$(".btnCreate").click(function(){var n=$(this),i={id:n[0].dataset.units};t.open(i,function(){e(n[0].dataset.units)})})}function s(){$(".btnEdit").click(function(){var n=$(this),t={id:n[0].dataset.units};i.open(t,function(t){var i=n.closest(".card-header").children("a").children("p").text(t.Name)})})}function u(n){html=`<div class="card card-point pl-2 pr-2 pt-1">
                            <div class="card-header  d-flex" >
                                <a href="javascript:void(0);" class="p-0 card-title collapsed text-left" data-toggle="collapse" data-target="#collapse`+n.id+`" aria-expanded="false" >
                                    <span class="ml-3 mr-3">
                                        <span class="collapsed-reveal">
                                            <i class="fal fa-minus-circle text-danger"></i>
                                        </span>
                                        <span class="collapsed-hidden">
                                            <i class="fal fa-plus-circle text-success"></i>
                                        </span>
                                    </span>
                                    <p class='mt-0 mb-0'> `+n.name+` </p>
                                   
                                </a>
                                <div class="ml-auto">
                                    <button class="btn btnCreate pr-1" style="font-size: 1rem; " data-units=`+n.id+`>
                                        <i class="far fa-plus-square"></i>
                                    </button>
                                    <button class="btn btnEdit p-2" style="font-size: 1rem; " data-units=`+n.id+`>
                                        <i class="fas fa-pencil"></i>
                                    </button>
                                    <button class="btn btnDelete pl-2" style="font-size: 1rem;" data-units=`+n.id+`>
                                        <i class="fal fa-trash-alt"></i>
                                    </button>
                                </div>
                            </div>
                            <div id="collapse`+n.id+`" class="collapse " >
                               
                            </div>
                        </div>`;$("#accordionExample").append(html)}function f(){$("#accordionExample").empty();n.getAll({searchTerm:$("#SearchTerm").val().trim()}).done(function(n){n.totalCount==0?$(".tbody_hidden").show():$(".tbody_hidden").hide();$.each(n.items,function(n,t){t.parrentId==null&&(u(t),e(t.id))});r()})}function e(t){var i=`#collapse`+t;$(i).empty();n.getAll({parrentId:t}).done(function(n){$.each(n.items,function(n,t){html=` <div class="card-body p-0 pl-4 pr-4 pt-1 pb-1 card-point">
                                        <div class="card-header d-flex" >
                                            <a href="javascript:void(0);" class="p-0 pl-5 card-title collapsed text-left" data-toggle="collapse"  aria-expanded="false" >
                                               <p class='mt-0 mb-0'> `+t.name+` </p>
                                            </a>
                                               <div class="ml-auto">
                                                <button class="btn p-2 btnEdit" style="font-size: 1rem;" data-units=`+t.id+`>
                                                    <i class="fas fa-pencil"></i>
                                                </button>
                                                <button class="btn pl-2 btnDelete" style="font-size: 1rem;" data-units=`+t.id+`>
                                                    <i class="fal fa-trash-alt"></i>
                                                </button>
                                            </div>
                                    </div>
                                </div>`;$(i).append(html)});o();s()})}var h=$("#unitsTable"),n=abp.services.app.unitService,t,i;moment.locale(abp.localization.currentLanguage.name);t=new app.ModalManager({viewUrl:abp.appPath+"Inventorys/Units/CreateUnits",scriptUrl:abp.appPath+"view-resources/Areas/Oms/Units/_CreateModal.js",modalClass:"UnitsCreateModal",modalType:"modal-xl"});i=new app.ModalManager({viewUrl:abp.appPath+"Inventorys/Units/EditUnitsModal",scriptUrl:abp.appPath+"view-resources/Areas/Oms/Units/_EditModal.js",modalClass:"UnitsEditModal",modalType:"modal-xl"});$("#CreateNewButtonxx").click(function(){var n=$(this);t.open({id:null},function(n){$(".tbody_hidden").hide();u(n);r()})});$("#Search").click(function(){f()});jQuery(document).ready(function(){$("#SearchTerm").focus()});f()})(jQuery),function(n){app.modals.UnitsCreateModal=function(){var u=abp.services.app.unitService,t,i=null,r={};this.init=function(n){t=n;i=t.getModal().find("form[name=frmCreate]")};n(".close-modal").on("click",function(){abp.libs.sweetAlert.config={confirm:{icon:"warning",buttons:["Không","Có"]}};abp.message.confirm(app.localize("Đóng"),app.localize("Bạn có chắc không"),function(n){if(n)return t.close(),!0})});this.save=function(){if(console.log("aaaaaaaaaaaaa"),i.addClass("was-validated"),i[0].checkValidity()===!1){console.log(i[0]);event.preventDefault();event.stopPropagation();return}var n=i.serializeFormToObject();n.ParrentId==0&&(n.ParrentId=null);t.setBusy(!0);u.create(n).done(function(i){console.log(i);r.id=i;r.name=n.Name;r.description=n.Description;r.parrentId==n.ParrentId;t.setResult(r);t.close();abp.notify.info("Thêm mới thành công!");abp.event.trigger("app.reloadDocTable")}).always(function(){t.setBusy(!1)})}}}(jQuery),function(n){app.modals.UnitsEditModal=function(){var r=abp.services.app.unitService,t,i=null;this.init=function(n){t=n;i=t.getModal().find("form[name=FrmEdit]")};n(".close-modal").on("click",function(){abp.libs.sweetAlert.config={confirm:{icon:"warning",buttons:["Không","Có"]}};abp.message.confirm(app.localize("Đóng"),app.localize("Bạn có chắc không"),function(n){if(n)return t.close(),!0})});this.save=function(){if(i.addClass("was-validated"),i[0].checkValidity()===!1){event.preventDefault();event.stopPropagation();return}var n=i.serializeFormToObject();t.setBusy(!0);r.update(n).done(function(){t.close();t.setResult(n);abp.notify.info("Cập nhật thành công!")}).always(function(){t.setBusy(!1)})}}}(jQuery);