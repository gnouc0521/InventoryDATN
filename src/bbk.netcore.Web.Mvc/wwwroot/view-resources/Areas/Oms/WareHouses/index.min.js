(function(){function t(){n.ajax.reload()}var u=$("#wareHouseTable"),i=abp.services.app.wareHouse,r,n;moment.locale(abp.localization.currentLanguage.name);var f=new app.ModalManager({viewUrl:abp.appPath+"Inventorys/WareHouse/CreateWareHouse",scriptUrl:abp.appPath+"view-resources/Areas/Oms/WareHouses/_CreateModal.js",modalClass:"WareHouseCreateModal",modalType:"modal-xl"}),e=new app.ModalManager({viewUrl:abp.appPath+"Inventorys/WareHouse/EditWareHouseModal",scriptUrl:abp.appPath+"view-resources/Areas/Oms/WareHouses/_EditModal.js",modalClass:"WareHouseEditModal",modalType:"modal-xl"}),o={edit:abp.auth.hasPermission("Inventorys.WareHouse.Edit")};$("#CreateNewButtonxx").click(function(){f.open()});r=function(){let n={};return n.searchTerm=$("#SearchTerm").val(),n};n=u.DataTable({paging:!0,serverSide:!1,processing:!0,searching:!1,language:{emptyTable:"Không tìm thấy dữ liệu",lengthMenu:"Hiển thị _MENU_ bản ghi"},bInfo:!1,bLengthChange:!0,lengthMenu:[[5,10,25,50,-1],[5,10,25,50,"Tất cả"],],pageLength:10,listAction:{ajaxFunction:i.getAll,inputFilter:r},order:[[1,"asc"]],columnDefs:[{orderable:!1,targets:0,className:"dt-body-center text-center",render:function(n,t,i){return'<input type="checkbox" name="" value="'+i.id+'">'}},{targets:1,orderable:!1,data:"code"},{orderable:!1,targets:2,data:"name",render:function(n,t,i){return`
                            <a class='docviewfunc'  data-objid='`+i.id+`' href='javascript:void(0);'>`+i.name+` </a>`}},{orderable:!1,targets:3,data:"cityName",render:function(n,t,i){return`
                            <span>`+i.number+` , `+i.wardsName+` , `+i.districtName+` , `+i.cityName+`</span>`}},{targets:4,orderable:!1,data:"typeWarehouse",render:n=>`<span>${n==0?"Đang hoạt động":n==1?"Kiểm kê":"Đầy kho"}</span>`},{targets:5,data:null,orderable:!1,autoWidth:!1,className:"text-center",render:function(n,t,i){return`
                            <a class='btn btn-warning text-white doceditfunc'  data-objid='`+i.id+`' href='javascript:void(0);'> Sửa </a>`}},]});abp.event.on("app.reloadDocTable",function(){t()});$("#example-select-all").on("click",function(){var i=n.rows({search:"applied"}).nodes(),t;$('input[type="checkbox"]',i).prop("checked",this.checked);$("#DeleteAll").removeAttr("disabled");t=[];$('#wareHouseTable tbody input[type="checkbox"]:checked').each(function(){t.push($(this))});t.length>0?$("#DeleteAll").removeAttr("disabled"):$("#DeleteAll").prop("disabled",!0)});$("#wareHouseTable tbody").on("change",'input[type="checkbox"]',function(){var t=[],n;$('#wareHouseTable tbody input[type="checkbox"]:checked').each(function(){t.push($(this))});t.length>0?$("#DeleteAll").removeAttr("disabled"):$("#DeleteAll").prop("disabled",!0);this.checked||(n=$("#example-select-all").get(0),n&&n.checked&&"indeterminate"in n&&(n.indeterminate=!0))});n.$('input[type="checkbox"]').each(function(n,t){t>0&&$("#DeleteAll").removeAttr("disabled")});$("#DeleteAll").on("click",function(){abp.message.confirm(app.localize("Xóa kho","Kho"),app.localize("Bạn có chắc không"),function(r){r&&n.$('input[type="checkbox"]').each(function(n,r){$(r).is(":checked")&&i.delete($(r).val()).done(function(){$("#example-select-all").prop("checked",!1);abp.notify.success(app.localize("Xóa kho thành công"));t()})})})});$("#wareHouseTable").on("click",".doceditfunc",function(){if(o.edit){var n=$(this),t={id:n[0].dataset.objid};e.open(t)}else abp.notify.error("Bạn không có quyền vào mục này")});$("#wareHouseTable").on("click",".docviewfunc",function(){var n=$(this),t={id:n[0].dataset.objid};abp.ajax({contentType:"application/x-www-form-urlencoded",url:abp.appPath+"Inventorys/WareHouse/OverView?Id="+t.id,success:function(n){console.log(n);window.location.href="/Inventorys/WareHouse/ViewWareHouse?warehouseId="+n.id}})});$("#Search").click(function(n){n.preventDefault();t()});jQuery(document).ready(function(){$("#SearchTerm").focus()})})(jQuery);